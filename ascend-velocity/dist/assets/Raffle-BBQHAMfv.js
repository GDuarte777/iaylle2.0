import{c as q,B as K,E as O,z as W,$ as X,j as o,o as e,Y as Z,ah as R,a0 as ee,a2 as ae,t as p,N as se,A as te,ai as re}from"./index-DidJ2IC_.js";import{G as V}from"./GlassCard-i8sBZgct.js";import{I as j}from"./input-RWOkaWNK.js";import{L as m}from"./label-i_K-zmDS.js";import{T as ne}from"./textarea-Bu6j6FbR.js";import{T as le,a as oe,b as C,c as M}from"./tabs-BkiDHpMy.js";import{B as ie}from"./button-DTTbzLxY.js";import{c as I}from"./confetti.module-oQXWb4Lk.js";import{U as ce}from"./upload-toFUCrye.js";import{R as de}from"./rotate-ccw-DceCIlGv.js";import{S as me}from"./sparkles-BfX_u-Yk.js";import"./index-DKXZ3643.js";import"./index-D2QiG8fX.js";import"./index-CKOwKrdC.js";const ue=[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]],he=q("dices",ue);const xe=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],pe=q("file-spreadsheet",xe);function Re(){const{user:D}=K(),L=O(),{theme:z}=W(),{startRaffleTutorial:_}=X(),[d,E]=o.useState("numbers"),[f,u]=o.useState(!1),[v,N]=o.useState(null),[U,F]=o.useState("?"),[y,G]=o.useState(1),[w,B]=o.useState(100),[g,A]=o.useState(1),[b,Q]=o.useState(""),[h,$]=o.useState([]),T=o.useRef(null),x=o.useRef(null),P=()=>{const t=Date.now()+3e3,l=z==="light"?["#0ea5e9","#8b5cf6","#000000"]:["#00f2ff","#bd00ff","#ffffff"],s=()=>{I({particleCount:5,angle:60,spread:55,origin:{x:0},colors:l}),I({particleCount:5,angle:120,spread:55,origin:{x:1},colors:l}),Date.now()<t&&requestAnimationFrame(s)};s()},J=a=>{const t=a.target.files?.[0];if(!t)return;const l=new FileReader;l.onload=s=>{const r=s.target?.result;if(!r)return;const i=r.split(/\r\n|\n/).filter(c=>c.trim()!=="").map(c=>{const S=c.replace(/^"|"$/g,"");return S.includes(",")?S.split(",")[0].trim():S.trim()}).filter(c=>c!=="");$(i)},l.readAsText(t)},k=()=>{const a=new Uint32Array(1);return crypto.getRandomValues(a),a[0]/4294967296},Y=()=>{u(!0),N(null);let a=[];if(d==="numbers"){const s=Number(y)||0,r=Number(w)||0;if(s>=r){u(!1);return}a=Array.from({length:100},()=>Math.floor(Math.random()*(r-s+1))+s)}else if(d==="names"){const s=b.split(`
`).filter(r=>r.trim()!=="");if(s.length===0){u(!1);return}a=s}else{if(h.length===0){u(!1);return}a=h}let t=0;const l=50;x.current=setInterval(()=>{const s=a[Math.floor(Math.random()*a.length)];F(s),t++,t>20&&H()},l)},H=async()=>{x.current&&clearInterval(x.current);let a=[];if(d==="numbers"){const t=Number(y)||0,l=Number(w)||0,s=Number(g)||1,r=l-t+1;if(s>=r){const n=Array.from({length:r},(i,c)=>t+c);for(let i=n.length-1;i>0;i--){const c=Math.floor(k()*(i+1));[n[i],n[c]]=[n[c],n[i]]}a=n.slice(0,s)}else{const n=new Set;for(;n.size<s;){const i=Math.floor(k()*(l-t+1))+t;n.add(i)}a=Array.from(n)}}else{const t=d==="names"?b.split(`
`).filter(r=>r.trim()!==""):h,l=Number(g)||1;t.length;const s=[...t];for(let r=s.length-1;r>0;r--){const n=Math.floor(k()*(r+1));[s[r],s[n]]=[s[n],s[r]]}a=s.slice(0,l)}if(N(a),u(!1),P(),D){const{blocked:t}=await re({delta:1,pagePath:window.location.pathname});if(t){L("/dashboard/settings?blocked=1",{replace:!0});return}}};return o.useEffect(()=>()=>{x.current&&clearInterval(x.current)},[]),e.jsx(Z,{children:e.jsxs("div",{className:"p-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-8 flex flex-col md:flex-row items-center justify-between gap-4 text-center md:text-left",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold mb-2 flex items-center justify-center md:justify-start gap-3",children:[e.jsx(R,{className:"w-8 h-8 md:w-10 md:h-10 text-neon-blue animate-bounce-slow"}),"Sorteios"]}),e.jsx("p",{className:"text-muted-foreground",children:"Realize sorteios de números ou nomes de forma rápida e justa"})]}),e.jsxs(ie,{onClick:_,variant:"outline",className:"flex gap-2 bg-white/10 hover:bg-white/20 border-white/20 text-foreground px-6",children:[e.jsx(ee,{className:"w-4 h-4 text-yellow-500"}),"Como usar"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[e.jsx("div",{className:"lg:col-span-5 space-y-6",children:e.jsx(V,{className:"p-6",children:e.jsxs(le,{defaultValue:"numbers",value:d,onValueChange:E,children:[e.jsxs(oe,{className:"grid w-full grid-cols-3 mb-6",children:[e.jsxs(C,{value:"numbers",className:"flex gap-2",id:"raffle-numbers-tab",children:[e.jsx(he,{className:"w-4 h-4"}),"Números"]}),e.jsxs(C,{value:"names",className:"flex gap-2",id:"raffle-names-tab",children:[e.jsx(ae,{className:"w-4 h-4"}),"Nomes"]}),e.jsxs(C,{value:"csv",className:"flex gap-2",id:"raffle-import-tab",children:[e.jsx(pe,{className:"w-4 h-4"}),"Importar"]})]}),e.jsxs(M,{value:"numbers",className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Mínimo"}),e.jsx(j,{type:"number",value:y,onChange:a=>G(a.target.value===""?"":Number(a.target.value)),className:"glass-card border-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Máximo"}),e.jsx(j,{type:"number",value:w,onChange:a=>B(a.target.value===""?"":Number(a.target.value)),className:"glass-card border-border"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Quantidade de Sorteados"}),e.jsx(j,{type:"number",min:1,max:100,value:g,onChange:a=>A(a.target.value===""?"":Number(a.target.value)),className:"glass-card border-border"})]})]}),e.jsxs(M,{value:"names",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Lista de Nomes (um por linha)"}),e.jsx(ne,{placeholder:`Ana Silva
João Santos
Maria Costa...`,value:b,onChange:a=>Q(a.target.value),className:"glass-card border-border min-h-[200px]"}),e.jsxs("p",{className:"text-xs text-muted-foreground text-right",children:[b.split(`
`).filter(a=>a.trim()!=="").length," nomes inseridos"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{children:"Quantidade de Sorteados"}),e.jsx(j,{type:"number",min:1,value:g,onChange:a=>A(a.target.value===""?"":Number(a.target.value)),className:"glass-card border-border"})]})]}),e.jsx(M,{value:"csv",className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(m,{children:"Arquivo CSV ou Texto (um nome por linha ou separado por vírgula)"}),e.jsxs("div",{className:"border-2 border-dashed border-border rounded-xl p-8 text-center hover:border-neon-blue/50 transition-colors cursor-pointer bg-muted/5",onClick:()=>T.current?.click(),children:[e.jsx("input",{type:"file",ref:T,className:"hidden",accept:".csv,.txt",onChange:J}),e.jsx(ce,{className:"w-10 h-10 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"Clique para selecionar ou arraste o arquivo"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Suporta .csv e .txt"})]}),h.length>0&&e.jsxs(p.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"bg-green-500/10 border border-green-500/20 rounded-lg p-4 text-green-400 text-sm text-center",children:[h.length," nomes carregados com sucesso!"]})]})}),d!=="csv"&&e.jsx("div",{className:"mt-8",children:e.jsx(se,{variant:"neon",className:"w-full h-12 text-lg",onClick:Y,disabled:f,children:f?"Sorteando...":"Sortear Agora"})})]})})}),e.jsx("div",{className:"lg:col-span-7 space-y-8",children:e.jsxs(V,{className:"h-full min-h-[400px] flex flex-col items-center justify-center p-8 relative overflow-hidden",id:"raffle-result-area",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neon-blue/5 to-neon-violet/5"}),e.jsx(te,{mode:"wait",children:v?e.jsxs(p.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.5,opacity:0},className:"z-10 w-full text-center",children:[e.jsxs(p.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},className:"mb-6",children:[e.jsx("img",{src:"https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/Activities/Trophy.png",alt:"Trophy",className:"w-32 h-32 mx-auto mb-4 animate-bounce-slow drop-shadow-2xl"}),e.jsx("h2",{className:"text-2xl font-bold text-muted-foreground uppercase tracking-widest",children:v.length>1?"Ganhadores":"Ganhador"})]}),e.jsx("div",{className:"flex flex-wrap justify-center gap-4",children:v.map((a,t)=>e.jsx(p.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:260,damping:20,delay:.3+t*.1},className:"px-8 py-6 rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 dark:from-neon-blue dark:to-neon-violet border border-white/20 shadow-lg dark:shadow-[0_0_30px_rgba(124,58,237,0.3)]",children:e.jsx("span",{className:"text-4xl md:text-5xl font-bold text-white drop-shadow-lg",children:a})},t))}),e.jsx("div",{className:"mt-12 text-center",children:e.jsxs("button",{onClick:()=>N(null),className:`inline-flex items-center justify-center px-8 py-3 rounded-full font-medium text-sm md:text-base transition-all duration-300 \r
                        bg-background dark:bg-muted/10 \r
                        text-foreground \r
                        border border-border \r
                        hover:bg-muted/50 \r
                        hover:border-primary/50 \r
                        shadow-sm hover:shadow-md hover:scale-105 active:scale-95`,children:[e.jsx(de,{className:"w-4 h-4 mr-2"}),"Novo Sorteio"]})})]},"result"):e.jsx(p.div,{className:"z-10 text-center",animate:f?{scale:[1,1.1,1]}:{},transition:{repeat:1/0,duration:.5},children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsx(me,{className:"w-16 h-16 text-neon-blue mx-auto animate-spin"}),e.jsx("div",{className:"text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-neon-blue to-neon-violet font-mono",children:U})]}):e.jsxs("div",{className:"space-y-4 opacity-50",children:[e.jsx(R,{className:"w-24 h-24 mx-auto mb-4"}),e.jsx("p",{className:"text-2xl font-medium",children:"Configure e clique em sortear"})]})},"waiting")})]})})]})]})})}export{Re as default};
