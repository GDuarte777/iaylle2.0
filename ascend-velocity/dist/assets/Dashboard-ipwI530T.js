const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BSbx0JO7.js","assets/index-BX7XDR4e.css"])))=>i.map(i=>d[i]);
import{c as Qe,O as de,I as N,H as j,P as Ut,_ as or,Q as mt,U as ir,V as Nt,j as c,o as e,X as lr,Y as dr,E as cr,Z as mr,J as ur,$ as xr,a0 as Ve,a1 as nt,a2 as kt,a3 as _t,a4 as Ct,a5 as fr,a6 as hr,a7 as gr,C as St,L as Et}from"./index-BSbx0JO7.js";import{a as At}from"./index-D2KvyjUI.js";import{B as Xe}from"./button-BPilKZxs.js";import{I as we}from"./input-DQGwEGmE.js";import{T as pr,a as br,b as ot,c as it}from"./tabs-85mAYfnQ.js";import{G as le}from"./GlassCard-VIvyi7x2.js";import{D as _e,a as Ce,b as Se,c as wr,d as vr}from"./dialog-C88qaMGg.js";import{C as ve}from"./calendar-U9oqd7ho.js";import{c as yr,A as Dt}from"./gamificationUtils-DdwrGp7l.js";import{S as Ge}from"./square-pen-BYbtk-kF.js";import{T as Ee}from"./trash-2-DN8uoqXU.js";import{T as jr}from"./trending-up-Cwfg6eHX.js";import{S as Nr}from"./star-CKJ3SfYd.js";import{Z as lt}from"./zap-1xZcmBY4.js";import{L as kr}from"./list-DqRksYVw.js";import{S as Tt}from"./search-DPd-n7Mp.js";import{T as _r}from"./target-gFPCt0BS.js";import"./index-DiCYkEsm.js";import"./index-CBUzlWaP.js";import"./index-CJ5TKr5o.js";import"./index-CjQuBds1.js";import"./index-BAL7-AhQ.js";const Cr=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],$t=Qe("chart-column",Cr);const Sr=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Mt=Qe("circle-check-big",Sr);const Er=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Ar=Qe("grid-3x3",Er);const Dr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],Lt=Qe("user-x",Dr),It=new Set(["Afiliada Exemplo 1","Afiliada Exemplo 2","Afiliada Exemplo 3"]);function Je(a,r){if(!r)return a;const s=a;return s&&typeof s.abortSignal=="function"?s.abortSignal(r):a}function Ft(a){const r=new Map;for(const i of a||[]){const d=i?.name;if(!It.has(d))continue;const o=r.get(d);if(!o){r.set(d,i);continue}const h=o?.created_at?Date.parse(o.created_at):Number.POSITIVE_INFINITY,u=i?.created_at?Date.parse(i.created_at):Number.POSITIVE_INFINITY;Number.isFinite(u)&&(u<h||!Number.isFinite(h))&&r.set(d,i)}const s=new Set(Array.from(r.values()).map(i=>i?.id).filter(Boolean));return(a||[]).filter(i=>{const d=i?.name;return It.has(d)?s.has(i?.id):!0})}async function Ae(a){try{const r=await de();if(!r)return j.error("Usu√°rio n√£o autenticado"),!1;if(!await Ut(r.id))return j.error("Esta funcionalidade n√£o est√° dispon√≠vel no seu plano atual."),!1;const i=N.from("subscriptions").select("id").eq("user_id",r.id).in("status",["active","trialing","past_due"]).limit(1).maybeSingle(),{data:d}=await Je(i,a);if(d?.id)return!0;const o=N.from("app_settings").select("value").eq("key","billing_settings").maybeSingle(),{data:h}=await Je(o,a),u=h?.value,x=typeof u?.free_usage_limit=="number"?u.free_usage_limit:null;if(typeof x!="number")return!0;const _=Math.max(0,x);if(_<=0)return!0;const C=N.from("affiliates").select("id",{count:"exact",head:!0}).eq("owner_user_id",r.id).eq("status","active"),{count:A}=await Je(C,a);if((typeof A=="number"?A:0)>=_){j.error("Limite do plano Free atingido. Fa√ßa upgrade para continuar.");try{window.location.href="/dashboard/settings"}catch(X){}return!1}return!0}catch{return!1}}async function Ke(){const a=await de();if(!a)return{userId:null,affiliateIds:[]};const{data:r,error:s}=await N.from("affiliates").select("id").eq("owner_user_id",a.id);if(s)return{userId:a.id,affiliateIds:[]};const i=(r||[]).map(d=>d.id).filter(Boolean);return{userId:a.id,affiliateIds:i}}async function Pt(){const a=await de();if(!a)return[];const{data:r,error:s}=await N.from("affiliates").select("*").eq("owner_user_id",a.id).eq("status","active").order("created_at",{ascending:!1});if(s)return console.error("Error fetching affiliates:",s),[];if(!r||r.length===0){const{error:i}=await N.rpc("ensure_default_affiliates");if(i)return[];const{data:d,error:o}=await N.from("affiliates").select("*").eq("owner_user_id",a.id).eq("status","active").order("created_at",{ascending:!1});return o?[]:Ft(d||[])}return Ft(r||[])}async function Tr(a,r,s,i,d){if(!await Ae(d?.signal))return null;const h=await de();if(!h)return j.error("Usu√°rio n√£o autenticado"),null;const u=typeof r=="string"?r.trim():"",x=N.from("affiliates").insert({owner_user_id:h.id,name:a,instagram:u||null,instagram_link:s,notes:i,status:"active"}).select().single(),{data:_,error:C}=await Je(x,d?.signal);return C?(console.error("Error adding affiliate:",C),j.error("Erro ao adicionar afiliada"),null):_}async function $r(a,r){if(!await Ae())return!1;const i=await de();if(!i)return j.error("Usu√°rio n√£o autenticado"),!1;const{error:d}=await N.from("affiliates").update(r).eq("id",a).eq("owner_user_id",i.id);return d?(console.error("Error updating affiliate:",d),j.error("Erro ao atualizar afiliada"),!1):!0}async function Mr(a){if(!await Ae())return!1;const s=await de();if(!s)return j.error("Usu√°rio n√£o autenticado"),!1;const{data:i,error:d}=await N.from("affiliates").select("id, owner_user_id").eq("id",a).eq("owner_user_id",s.id).maybeSingle();if(d||!i?.id)return j.error("Afiliada n√£o encontrada"),!1;let o;try{o=i?.owner_user_id}catch{}const{error:h}=await N.from("affiliate_achievements").delete().eq("affiliate_id",a);if(h)if(h.code==="PGRST205")try{if(o){const{error:_}=await N.from("user_achievements").delete().eq("user_id",o);_&&console.warn("Fallback user_achievements failed:",_)}}catch{}else return console.error("Error deleting related achievements:",h),j.error("Erro ao remover conquistas relacionadas"),!1;const{error:u}=await N.from("affiliate_metrics").delete().eq("affiliate_id",a);if(u)if(u.code==="PGRST205"){const{error:_}=await N.from("calendar_events").delete().eq("affiliate_id",a);if(_)return console.error("Error deleting related metrics (fallback):",_),j.error("Erro ao remover m√©tricas relacionadas"),!1}else return console.error("Error deleting related metrics:",u),j.error("Erro ao remover m√©tricas relacionadas"),!1;const{error:x}=await N.from("affiliates").delete().eq("id",a).eq("owner_user_id",s.id);return x?(console.error("Error deleting affiliate:",x),j.error("Erro ao remover afiliada"),!1):!0}async function Ot(){const{userId:a,affiliateIds:r}=await Ke();if(!a)return{};if(!r.length)return{};const{data:s,error:i}=await N.from("affiliate_metrics").select("affiliate_id, date, status").in("affiliate_id",r);if(i)return console.error("Error fetching statuses:",i),{};const d={};return s?.forEach(o=>{d[`${o.affiliate_id}:${o.date}`]=o.status}),d}async function ct(a,r){const s=new Date(a,r,1).toISOString().split("T")[0],i=new Date(a,r+1,0).toISOString().split("T")[0],{userId:d,affiliateIds:o}=await Ke();if(!d)return{};if(!o.length)return{};const{data:h,error:u}=await N.from("affiliate_metrics").select("affiliate_id, date, status").in("affiliate_id",o).gte("date",s).lte("date",i);if(u)return console.error("Error fetching month statuses:",u),{};const x={};return h?.forEach(_=>{x[`${_.affiliate_id}:${_.date}`]=_.status}),x}async function Lr(a,r){if(!await Ae())return!1;const i=new Date(a,r,1).toISOString().split("T")[0],d=new Date(a,r+1,0).toISOString().split("T")[0],{userId:o,affiliateIds:h}=await Ke();if(!o)return j.error("Usu√°rio n√£o autenticado"),!1;if(!h.length)return!0;const{error:u}=await N.from("affiliate_metrics").delete().in("affiliate_id",h).gte("date",i).lte("date",d);if(u)return console.error("Error deleting month metrics:",u),j.error("Erro ao apagar dados do m√™s"),!1;const x=`${a}-${String(r+1).padStart(2,"0")}`,{error:_}=await N.from("affiliate_achievements").delete().in("affiliate_id",h).or(`period_tag.eq.${x},period_tag.like.${x}-%`);return _?(console.error("Error deleting month achievements:",_),j.error("Erro ao apagar conquistas do m√™s"),!1):!0}async function Ir(a,r,s){if(!await Ae())return!1;const d=await de();if(!d)return j.error("Usu√°rio n√£o autenticado"),!1;const{data:o,error:h}=await N.from("affiliates").select("id").eq("id",a).eq("owner_user_id",d.id).maybeSingle();if(h||!o?.id)return j.error("Afiliada n√£o encontrada"),!1;if(s===null){const{error:u}=await N.from("affiliate_metrics").delete().eq("affiliate_id",a).eq("date",r);if(u)return console.error("Error clearing status:",u),j.error("Erro ao limpar status"),!1}else{const{error:u}=await N.from("affiliate_metrics").upsert({affiliate_id:a,date:r,status:s},{onConflict:"affiliate_id,date"});if(u)return console.error("Error saving status:",u),j.error("Erro ao salvar status"),!1}(async()=>{try{const u=(await or(async()=>{const{useStatusConfig:p}=await import("./index-BSbx0JO7.js").then(g=>g.a_);return{useStatusConfig:p}},__vite__mapDeps([0,1]))).useStatusConfig.getState(),x=r.slice(0,7),{data:_}=await N.from("affiliate_metrics").select("*").eq("affiliate_id",a),C={};(_||[]).forEach(p=>{C[`${a}:${p.date}`]=p.status});const A={},{data:L}=await N.from("affiliate_achievements").select("id, achievement_id, period_tag").eq("affiliate_id",a);(L||[]).forEach(p=>{const g=p.period_tag?`${p.achievement_id}@${p.period_tag}`:p.achievement_id;A[g]=p.id});const X=[],E=[];if(u.achievements.forEach(p=>{const g=new Set(p.classKeys||[]),k=Object.entries(C).filter(([y,f])=>y.startsWith(`${a}:`)&&g.has(f)).map(([y])=>new Date(y.split(":")[1])).sort((y,f)=>y.getTime()-f.getTime());let v=!1,m=null;if((p.streakDays||0)>0){let y=k;if(p.timeWindow==="month")y=k.filter(D=>D.toISOString().slice(0,7)===x),m=x;else if(p.timeWindow==="week")try{const D=new Date(r),U=(D.getUTCDay()+6)%7,G=new Date(D);G.setUTCDate(D.getUTCDate()-U);const ce=new Date(G);ce.setUTCDate(G.getUTCDate()+6);const Z=G.toISOString().slice(0,10),B=ce.toISOString().slice(0,10);y=k.filter(ge=>{const De=ge.toISOString().slice(0,10);return De>=Z&&De<=B}),m=`${Z}`}catch(D){console.error("Error calculating week dates:",D),y=[]}else m=null;let f=0,T=null;v=!1;for(const D of y){if(T){let I=Math.round((D.getTime()-T.getTime())/864e5);if(p.ignoreDays&&p.ignoreDays.length>0){const U=new Date(T);U.setUTCDate(U.getUTCDate()+1);let G=0;for(;U<D&&G<30;)p.ignoreDays.includes(U.getUTCDay())&&I--,U.setUTCDate(U.getUTCDate()+1),G++}f=I===1?f+1:1}else f=1;if(T=D,f>=(p.streakDays||0)){v=!0;break}}}else if((p.countThreshold||0)>0)if(p.timeWindow==="month")v=k.filter(f=>f.toISOString().slice(0,7)===x).length>=(p.countThreshold||0),m=x;else if(p.timeWindow==="week")try{const y=new Date(r),T=(y.getUTCDay()+6)%7,D=new Date(y);D.setUTCDate(y.getUTCDate()-T);const I=new Date(D);I.setUTCDate(D.getUTCDate()+6);const U=D.toISOString().slice(0,10),G=I.toISOString().slice(0,10);v=k.filter(Z=>{const B=Z.toISOString().slice(0,10);return B>=U&&B<=G}).length>=(p.countThreshold||0),m=`${U}`}catch(y){console.error("Error calculating week count:",y),v=!1}else v=k.length>=(p.countThreshold||0),m=null;const S=m?`${p.id}@${m}`:p.id;v&&!A[S]?X.push({achievement_id:p.id,period_tag:m,points_awarded:p.xp}):!v&&A[S]&&E.push(A[S])}),X.length){const p=X.map(k=>({affiliate_id:a,achievement_id:k.achievement_id,period_tag:k.period_tag,points_awarded:k.points_awarded,awarded_at:new Date().toISOString()})),{error:g}=await N.from("affiliate_achievements").insert(p);g||window.dispatchEvent(new CustomEvent("achievement-awarded"))}if(E.length){const{error:p}=await N.from("affiliate_achievements").delete().in("id",E);p?console.error("Error removing achievements:",p):window.dispatchEvent(new CustomEvent("achievement-awarded"))}}catch(u){console.error("Error evaluating achievements:",u)}})();try{window.dispatchEvent(new CustomEvent("calendar-status-updated",{detail:{affiliateId:a,date:r,status:s}}))}catch{}return!0}async function qt(){const{userId:a,affiliateIds:r}=await Ke();if(!a)return{};if(!r.length)return{};const{data:s,error:i}=await N.from("affiliate_achievements").select("affiliate_id, achievement_id, period_tag").in("affiliate_id",r);if(i)return{};const d={};return(s||[]).forEach(o=>{const h=o.period_tag?`${o.achievement_id}@${o.period_tag}`:o.achievement_id;d[o.affiliate_id]||(d[o.affiliate_id]={}),d[o.affiliate_id][h]=!0}),d}window.__calendarStatuses=window.__calendarStatuses||{};window.__affiliatePoints=window.__affiliatePoints||{};window.__awardedAchievements=window.__awardedAchievements||{};window.__loadedMonths=window.__loadedMonths||{};window.selectedAfiliada=null;window.currentMonth=new Date().getMonth();window.currentYear=new Date().getFullYear();window.defaultConfig={background_color:"#f8fafc",card_color:"#ffffff",text_color:"#1e293b",primary_color:"#9b184e",accent_color:"#e75761",font_family:"Inter",font_size:12,titulo_principal:"Painel de Gest√£o de Afiliadas - Aylle Duarte",subtitulo:"Acompanhe o desempenho dos seus afiliados em tempo real",empresa:"Aylle Duarte"};function Fr(){const a="legacy-calendar-styles";if(document.getElementById(a))return;const r=document.createElement("style");r.id=a,r.textContent=`
    #legacy-calendar-overlay {
      --calendar-bg: rgba(255, 255, 255, 0.75);
      --calendar-text: #1e293b;
      --calendar-primary: #9b184e;
      --calendar-day-bg: #f1f5f9;
      --calendar-day-text: #475569;
      --calendar-menu-bg: #ffffff;
      --calendar-menu-hover: #f8fafc;
      --calendar-border: #e2e8f0;
      --calendar-shadow: rgba(155, 24, 78, 0.1);
      --modal-backdrop-bg: rgba(0, 0, 0, 0.4);
    }

    #legacy-calendar-overlay.dark {
      --calendar-bg: rgba(30, 41, 59, 0.75);
      --calendar-text: #f8fafc;
      --calendar-primary: #e75761;
      --calendar-day-bg: #334155;
      --calendar-day-text: #cbd5e1;
      --calendar-menu-bg: #1e293b;
      --calendar-menu-hover: #334155;
      --calendar-border: #334155;
      --calendar-shadow: rgba(231, 87, 97, 0.15);
      --modal-backdrop-bg: rgba(0, 0, 0, 0.6);
    }

    .gradient-bg { background: linear-gradient(135deg, #9b184e 0%, #e75761 100%); }
    .glass-effect {
      backdrop-filter: blur(12px);
      background: var(--calendar-bg);
      color: var(--calendar-text);
      border: 1px solid var(--calendar-border);
    }
    html.dark .glass-effect {
      background: rgba(30, 41, 59, 0.80);
      color: #f8fafc;
      border-color: #334155;
    }
    .card-shadow { box-shadow: 0 4px 20px var(--calendar-shadow); }
    .hover-lift { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
    .hover-lift:hover { transform: translateY(-4px); box-shadow: 0 8px 30px rgba(155, 24, 78, 0.2); }
    .calendar-day { transition: all 0.2s ease; cursor: pointer; position: relative; }
    .calendar-day:hover { transform: scale(1.05); }
    .status-postou-vendas { background: linear-gradient(135deg, #059669, #10B981); color: white; }
    .status-postou { background: linear-gradient(135deg, #F59E0B, #FCD34D); color: white; }
    .status-nao-postou { background: linear-gradient(135deg, #EF4444, #F87171); color: white; }
    .status-sem-analise { background: linear-gradient(135deg, #6B7280, #9CA3AF); color: white; }
    .modal-backdrop { backdrop-filter: blur(8px); background: var(--modal-backdrop-bg); }
    .day-default-bg { background-color: var(--calendar-day-bg); color: var(--calendar-day-text); }
    .day-menu { background-color: var(--calendar-menu-bg); border-color: var(--calendar-border); }
    .day-menu-btn:hover { background-color: var(--calendar-menu-hover); }
    .close-btn:hover { background-color: var(--calendar-day-bg); }

    @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .animate-fade-in { animation: fadeInUp 0.6s ease-out; }
  `,document.head.appendChild(r)}function Pr(a,r){return new Date(r,a+1,0).getDate()}function Or(a,r){return new Date(r,a,1).getDay()}function qr(a){const s=mt.getState().achievements||[],i=window.__awardedAchievements[a]||{},d=Object.entries(window.__calendarStatuses).filter(([o,h])=>o.startsWith(`${a}:`));for(const o of s){const h=`${window.currentYear}-${String(window.currentMonth+1).padStart(2,"0")}`,u=o.timeWindow==="month"?`${o.id}@${h}`:o.id;if(i[u])continue;const x=new Set(o.classKeys||[]),_=d.filter(([,C])=>x.has(C)).map(([C])=>new Date(C.split(":")[1])).sort((C,A)=>C.getTime()-A.getTime());if((o.streakDays||0)>0){let C=0,A=null;for(const L of _)if(A&&(L.getTime()-A.getTime())/864e5===1?C+=1:C=1,A=L,C>=(o.streakDays||0)){window.__awardedAchievements[a]={...i,[u]:!0},window.__affiliatePoints[a]=(window.__affiliatePoints[a]||0)+o.xp,window.onAchievementAwarded?.({affiliateId:a,achievementId:o.id,xp:o.xp,title:o.title});break}}(o.countThreshold||0)>0&&d.filter(([A,L])=>A.includes(`:${h}-`)).filter(([,A])=>x.has(A)).length>=(o.countThreshold||0)&&(window.__awardedAchievements[a]={...i,[u]:!0},window.__affiliatePoints[a]=(window.__affiliatePoints[a]||0)+o.xp,window.onAchievementAwarded?.({affiliateId:a,achievementId:o.id,xp:o.xp,title:o.title}))}}window.getStatusForDay=function(a,r,s,i){const d=`${a}:${i}-${String(s+1).padStart(2,"0")}-${String(r).padStart(2,"0")}`;return window.__calendarStatuses[d]||null};window.marcarDia=function(a,r){if(!window.selectedAfiliada)return;const s=`${window.selectedAfiliada.id}:${window.currentYear}-${String(window.currentMonth+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`,i=`${window.currentYear}-${String(window.currentMonth+1).padStart(2,"0")}-${String(a).padStart(2,"0")}`;Ir(window.selectedAfiliada.id,i,r).then(d=>{if(!d)return;r?window.__calendarStatuses[s]=r:delete window.__calendarStatuses[s],qr(window.selectedAfiliada.id);const o=document.getElementById("legacy-calendar-root");o&&(o.innerHTML=window.renderCalendario()),window.dispatchEvent(new Event("focus"))})};window.toggleDayMenu=function(a){const r=document.getElementById(`day-menu-${a}`);if(!r)return;const s=r.classList.contains("hidden");document.querySelectorAll('[id^="day-menu-"]').forEach(i=>i.classList.add("hidden")),s&&r.classList.remove("hidden")};window.navegarMes=function(a){const r=a==="prev"?-1:1,s=new Date(window.currentYear,window.currentMonth+r,1);window.currentYear=s.getFullYear(),window.currentMonth=s.getMonth(),Bt(window.currentYear,window.currentMonth);const i=document.getElementById("legacy-calendar-root");i&&(i.innerHTML=window.renderCalendario())};window.fecharCalendario=function(){const a=document.getElementById("legacy-calendar-overlay");a&&a.remove(),window.themeObserver&&(window.themeObserver.disconnect(),window.themeObserver=null)};window.renderCalendario=function(){if(!window.selectedAfiliada)return"";Bt(window.currentYear,window.currentMonth);const r=(window.elementSdk?.config||window.defaultConfig).font_size||window.defaultConfig.font_size,s=Pr(window.currentMonth,window.currentYear),i=Or(window.currentMonth,window.currentYear),d=["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],o=["Dom","Seg","Ter","Qua","Qui","Sex","S√°b"],h=mt.getState().classes;let u=`
    <div class="fixed inset-0 modal-backdrop flex items-center justify-center z-50">
      <div class="max-w-xs w-full mx-4 glass-effect rounded-2xl p-3 card-shadow animate-fade-in" onclick="event.stopPropagation()">
        <div class="flex items-center justify-between mb-4">
          <div>
            <h3 style="font-size: ${r*1.5}px; font-weight: 700; color: var(--calendar-primary);">üìÖ ${window.selectedAfiliada.nome}</h3>
            <p style="font-size: ${r*.9}px; opacity: 0.7;">Marque as postagens do m√™s</p>
          </div>
          <button onclick="fecharCalendario()" class="p-3 rounded-xl close-btn transition-all" style="font-size: ${r*1.2}px;">‚úï</button>
        </div>
        <div class="flex items-center justify-between mb-4">
          <button onclick="navegarMes('prev')" class="p-3 rounded-xl gradient-bg text-white hover-lift">‚Äπ</button>
          <h4 style="font-size: ${r*1.2}px; font-weight: 600;">${d[window.currentMonth]} ${window.currentYear}</h4>
          <button onclick="navegarMes('next')" class="p-3 rounded-xl gradient-bg text-white hover-lift">‚Ä∫</button>
        </div>
        <div class="grid grid-cols-7 gap-1 mb-2">
          ${o.map(x=>`
            <div class="text-center p-2" style="font-size: ${r*.8}px; font-weight: 600; opacity: 0.6;">${x}</div>
          `).join("")}
        </div>
        <div class="grid grid-cols-7 gap-1 mb-4">
  `;for(let x=0;x<i;x++)u+="<div></div>";for(let x=1;x<=s;x++){const _=window.getStatusForDay(window.selectedAfiliada.id,x,window.currentMonth,window.currentYear);let C="day-default-bg",A="";const L=new Date(window.currentYear,window.currentMonth,x).getDay(),X=L===0||L===6;if(_){const E=h.find(p=>p.key===_);E?.bgClass?C=E.bgClass:E?.bg&&(C="",A=E.bg)}else if(X){const E=h.find(p=>p.key==="sem_analise");E?.bgClass?C=E.bgClass:E?.bg?(C="",A=E.bg):C="status-sem-analise"}u+=`
      <div class="relative">
        <button onclick="toggleDayMenu(${x})" class="calendar-day w-full aspect-square rounded-xl flex items-center justify-center ${C}" style="${A?`background:${A}; color: white;`:""} font-size: ${r*.9}px; font-weight: 600;">
          ${x}
        </button>
        <div id="day-menu-${x}" class="absolute day-menu top-full left-0 mt-2 rounded-xl shadow-xl border z-20 hidden overflow-hidden" style="min-width: 160px;">
          ${h.map(E=>`
            <button onclick="marcarDia(${x}, '${E.key}')" class="w-full text-left px-4 py-3 day-menu-btn transition-all" style="font-size: ${r*.85}px;">
              ${E.label}
            </button>
          `).join("")}
          ${_?`<button onclick="marcarDia(${x}, null)" class="w-full text-left px-4 py-3 day-menu-btn border-t" style="border-color: var(--calendar-border); font-size: ${r*.85}px;">Limpar</button>`:""}
        </div>
      </div>
    `}return u+=`
        </div>
        <div class="grid grid-cols-2 gap-x-4 gap-y-2" style="font-size: ${r*.85}px;">
          ${h.map(x=>`
            <div class="flex items-center gap-2">
              <span class="w-3 h-3 rounded-full ${x.bgClass||""}" style="${x.bg&&!x.bgClass?`background:${x.bg}`:""}"></span>
              <span>${x.label}</span>
            </div>
          `).join("")}
        </div>
      </div>
    </div>
  `,u};window.openLegacyCalendar=function(a){Fr(),window.selectedAfiliada=a,window.currentMonth=new Date().getMonth(),window.currentYear=new Date().getFullYear();const r=document.createElement("div");r.id="legacy-calendar-overlay",r.className="fixed inset-0 z-50";const s=document.createElement("div");s.id="legacy-calendar-root",s.innerHTML=window.renderCalendario(),r.appendChild(s),document.body.appendChild(r);const i=()=>{document.documentElement.classList.contains("dark")?r.classList.add("dark"):r.classList.remove("dark")};i();const d=new MutationObserver(i);d.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),window.themeObserver=d,r.addEventListener("click",o=>{o.target===r&&window.fecharCalendario()})};async function Bt(a,r){const s=`${a}-${String(r+1).padStart(2,"0")}`;if(window.__loadedMonths[s])return;const i=await ct(a,r);window.__calendarStatuses={...window.__calendarStatuses,...i},window.__loadedMonths[s]=!0}const He="dashboard_banner",he={title:"Painel de Gest√£o de Afiliados -",description:"Acompanhe o desempenho dos seus afiliados em tempo real",gradientFrom:"from-primary",gradientVia:"via-secondary",gradientTo:"to-accent"},Rr="Painel de Gest√£o de Afiliados - Aylle Duarte";function Ur(){try{if(typeof window>"u")return null;const a=window.localStorage?.getItem("banner-storage");if(!a)return null;const s=JSON.parse(a)?.state?.config;return!s||typeof s!="object"||typeof s.title!="string"||!s.title.trim()?null:{title:String(s.title),description:typeof s.description=="string"?s.description:he.description,gradientFrom:typeof s.gradientFrom=="string"?s.gradientFrom:he.gradientFrom,gradientVia:typeof s.gradientVia=="string"?s.gradientVia:he.gradientVia,gradientTo:typeof s.gradientTo=="string"?s.gradientTo:he.gradientTo}}catch{return null}}async function Rt(a){const{data:r,error:s}=await N.from("user_settings").select("settings").eq("user_id",a).maybeSingle();return s?{settings:null,error:s}:{settings:r?.settings||null,error:null}}async function dt(a,r){return await Ut(a)?N.from("user_settings").upsert({user_id:a,settings:r,updated_at:new Date().toISOString()},{onConflict:"user_id"}):(j.error("Esta funcionalidade n√£o est√° dispon√≠vel no seu plano atual."),{data:null,error:{message:"forbidden"}})}const Br=ir()((a,r)=>({config:he,initializeFromSupabase:async()=>{const s=await Nt();if(!s)return;const{settings:i,error:d}=await Rt(s);if(d)return;const o=i||{},h=o?.[He];if(h&&typeof h=="object"){const A={...he,...h};if(a({config:A}),!h.title||typeof h.title!="string"||!h.title.trim()){const L={...o,[He]:A};await dt(s,L)}return}const u=Ur(),_=u&&typeof u.title=="string"&&u.title.trim()&&u.title!==Rr?u:he;a({config:_});const C={...o,[He]:_};await dt(s,C)},updateConfig:async s=>{const i={...r().config,...s};a({config:i});const d=await Nt();if(!d)return;const{settings:o}=await Rt(d),u={...o||{},[He]:i};await dt(d,u)}}));function zr({isOpen:a,onClose:r,affiliate:s,calendarStatuses:i,classes:d}){const o=c.useRef(null),[h,u]=c.useState({month:new Date().getMonth(),year:new Date().getFullYear(),date:new Date().getDate(),monthformat:"full",highlighttoday:!0,highlighttargetdate:!1,prevnextbutton:"show",todaybutton:"show"});return c.useEffect(()=>{if(!a||!o.current)return;const x={full:["January","February","March","April","May","June","July","August","September","October","November","December"],mmm:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},_={d:["S","M","T","W","T","F","S"]};function C(g,k,v){const m=new Date,S={};return S.today={date:m.getDate(),monthIndex:m.getMonth(),year:m.getFullYear()},m.setFullYear(g),m.setMonth(k),m.setDate(1),S.firstDayIndex=m.getDay(),S.monthIndex=k,S.year=g,m.setMonth(k+1),m.setDate(0),S.totaldays=m.getDate(),S}function A(g,k){const v=document.createElement("table");let m=document.createElement("tr");for(let f=0;f<=6;f++){const T=document.createElement("td");T.innerHTML=_.d[f],m.appendChild(T)}v.appendChild(m),m=document.createElement("tr");let S=0;for(;S<g.firstDayIndex;S++){const f=document.createElement("td");m.appendChild(f)}let y=1;for(;S<=6;){const f=document.createElement("td");f.innerHTML=String(y),L(f,y,g.monthIndex,g.year,k,g),m.appendChild(f),y++,S++}v.appendChild(m);for(let f=3;f<=7&&!(y>g.totaldays);f++){m=document.createElement("tr");for(let T=0;T<=6&&!(y>g.totaldays);T++){const D=document.createElement("td");D.innerHTML=String(y),L(D,y,g.monthIndex,g.year,k,g),m.appendChild(D),y++}v.appendChild(m)}return v}function L(g,k,v,m,S,y){if(S.highlighttoday&&y.today.date===k&&y.today.monthIndex===y.monthIndex&&g.classList.add("dycalendar-today-date"),S.highlighttargetdate&&S.date===k&&y.monthIndex===S.month&&g.classList.add("dycalendar-target-date"),s&&i&&d){const f=`${m}-${String(v+1).padStart(2,"0")}-${String(k).padStart(2,"0")}`,T=`${s.id}:${f}`,D=i[T];if(D){const I=d.find(U=>U.key===D);I&&(g.style.background=I.bg||"#ccc",g.style.color=I.textColor||"#fff",g.title=`${I.label} (${I.points} pts)`)}}}function X(g,k){const v=document.createElement("div");v.className="dycalendar-month-container";const m=document.createElement("div");if(m.className="dycalendar-header",m.setAttribute("data-option",JSON.stringify(k)),k.prevnextbutton==="show"){const f=document.createElement("span");f.className="dycalendar-prev-next-btn prev-btn",f.setAttribute("data-btn","prev"),f.textContent="<",m.appendChild(f)}const S=document.createElement("span");if(S.className="dycalendar-span-month-year",S.textContent=k.monthformat==="full"?x.full[g.monthIndex]+" "+g.year:x.mmm[g.monthIndex]+" "+g.year,m.appendChild(S),k.prevnextbutton==="show"){const f=document.createElement("span");f.className="dycalendar-prev-next-btn next-btn",f.setAttribute("data-btn","next"),f.textContent=">",m.appendChild(f)}if(v.appendChild(m),k.todaybutton==="show"){const f=document.createElement("div");f.className="dycalendar-today-btn";const T=document.createElement("span");T.className="today-btn",T.setAttribute("data-btn","today"),T.textContent="Today",f.appendChild(T),v.appendChild(f)}const y=document.createElement("div");return y.className="dycalendar-body",y.appendChild(A(g,k)),v.appendChild(y),v}function E(g){const k=C(g.year,g.month,g.date),v=X(k,g),m=o.current;m.innerHTML="",m.appendChild(v)}function p(){o.current.addEventListener("click",k=>{const v=k.target;if(v.classList.contains("dycalendar-prev-next-btn")){const m=JSON.parse(v.parentElement.getAttribute("data-option")||"{}"),y=v.getAttribute("data-btn")==="prev"?-1:1,f=new Date(m.year,m.month+y,1),T={...m,month:f.getMonth(),year:f.getFullYear()};u(T),E(T)}else if(v.classList.contains("today-btn")){const m=new Date,S={...h,date:m.getDate(),month:m.getMonth(),year:m.getFullYear()};u(S),E(S)}else if(v.tagName==="TD"&&v.innerHTML){const m=Number(v.innerHTML),S={...h,highlighttargetdate:!0,date:m};u(S),E(S)}})}p(),E(h)},[a,i,d,h]),a?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"rounded-2xl shadow-xl w-full max-w-md mx-auto p-6 relative",style:{background:"linear-gradient(135deg, #9b184e 0%, #e75761 100%)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-white rounded-lg",children:e.jsx(ve,{className:"w-5 h-5 text-[#e75761]"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:s?.name}),e.jsxs("div",{className:"flex items-center gap-2 text-white/90 text-sm",children:[e.jsxs("span",{children:[s?.points||0," pts"]}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:s?.level||"Iniciante"})]})]})]}),e.jsx("button",{onClick:r,className:"text-white hover:text-white/90 transition-colors",children:e.jsx(lr,{className:"w-5 h-5"})})]}),e.jsx("div",{id:"dycalendar",ref:o,className:"bg-white/10 rounded-xl p-4"}),e.jsx("style",{children:`
          #dycalendar table { width: 100%; border-spacing: 8px; }
          #dycalendar table tr:nth-child(1) td { background: #fff; color: #111; border-radius: 4px; font-weight: 600; }
          #dycalendar table td { color: #fff; padding: 10px; cursor: pointer; border-radius: 4px; }
          #dycalendar table td:hover { background: #fff; color: #111 !important; }
          .dycalendar-today-date, .dycalendar-target-date { background: #fff !important; color: #111 !important; border-radius: 8px; }
          .dycalendar-prev-next-btn.prev-btn, .dycalendar-prev-next-btn.next-btn { background: #fff; color: #111; width: 44px; height: 38px; border-radius: 4px; font-size: 24px; display: flex; align-items: center; justify-content: center; }
          .dycalendar-span-month-year { color: #fff; font-size: 1.5em; font-weight: 500; }
          .dycalendar-today-btn .today-btn { background: #fff; color: #111; border-radius: 4px; padding: 5px; cursor: pointer; }
          .dycalendar-header, .dycalendar-body, .dycalendar-today-btn { display: flex; align-items: center; justify-content: center; gap: 12px; }
          .dycalendar-month-container { display: flex; flex-direction: column; gap: 10px; }
        `})]})}):null}function Yr(){const a=cr(),r=mr(),[s,i]=c.useState("dashboard"),[d,o]=c.useState("grid"),[h,u]=c.useState(!1),[x,_]=c.useState(null),[C,A]=c.useState(""),[L,X]=c.useState(new Date().getMonth()),[E,p]=c.useState(new Date().getFullYear()),[g,k]=c.useState(new Date().getMonth()),[v,m]=c.useState(new Date().getFullYear()),[S,y]=c.useState([]),f=c.useRef([]),T=c.useRef({}),D=c.useRef({}),{config:I,updateConfig:U,initializeFromSupabase:G}=Br(),[ce,Z]=c.useState(!1),[B,ge]=c.useState(I),[De,Ze]=c.useState(!1);c.useEffect(()=>{ce&&ge(I)},[ce,I]);const zt=async()=>{if(r&&!r.canUseTool("dashboard-banner-save")){r.notifyToolBlocked();return}await U(B),Z(!1),j.success("Banner atualizado com sucesso!")};c.useEffect(()=>{G()},[G]);const{classes:K,levels:W,achievements:ee,initializeFromSupabase:ut}=mt(),{subscription:Yt}=ur(),{startDashboardTutorial:Wt}=xr(),Te=!Yt,[ae,$e]=c.useState(null),ye=c.useCallback(t=>{let n=W[0],l=W[W.length-1];for(let b=0;b<W.length;b++)t>=W[b].minXP&&(n=W[b],b<W.length-1?l=W[b+1]:l={...W[b],minXP:W[b].minXP*1.5});const w=Math.min(100,Math.max(0,(t-n.minXP)/(l.minXP-n.minXP)*100));return{currentLevel:n,nextLevel:l,progress:w}},[W]);c.useEffect(()=>{ut()},[ut]),c.useEffect(()=>{(async()=>{try{const{data:n,error:l}=await N.from("app_settings").select("value").eq("key","billing_settings").maybeSingle();if(l){$e(null);return}const w=n?.value;typeof w?.free_usage_limit=="number"?$e(w.free_usage_limit):$e(null)}catch{$e(null)}})()},[]);const[Y,Vt]=c.useState([]),[Xt,xt]=c.useState([]),[Gt,Ht]=c.useState({}),[Wr,Jt]=c.useState({}),[et,Qt]=c.useState(""),[Kt,Me]=c.useState(!1),[tt,ft]=c.useState(!1),[se,je]=c.useState(!1),pe=c.useRef(null),te=c.useRef(null),rt=c.useRef(null),ht=Y.filter(t=>{if(!et.trim())return!0;const n=et.toLowerCase();return(t.name||"").toLowerCase().includes(n)||(t.username||"").toLowerCase().includes(n)}),gt=c.useCallback((t,n,l)=>{const w=`${E}-${String(L+1).padStart(2,"0")}`;return t.map(b=>{const $=b.id,P=typeof b.instagram=="string"?b.instagram.trim():"",R=P?P.startsWith("@")?P:`@${P}`:"",q=Object.entries(n).filter(([F])=>F.startsWith(`${$}:`)).filter(([F])=>F.includes(`:${w}-`)),xe=q.filter(([,F])=>K.find(M=>M.key===F)?.type==="positive").length,V=q.filter(([,F])=>K.find(M=>M.key===F)?.type==="negative").length,z=q.filter(([,F])=>F==="sem_analise").length,H=q.filter(([,F])=>F==="postou_vendas").length,qe=q.reduce((F,[,J])=>{const M=K.find(Q=>Q.key===J);return F+(M?.points||0)},0),Re=l[$]||{},at=ee.filter(F=>Object.keys(Re).some(J=>J===F.id||J.startsWith(`${F.id}@`))),st=ee.reduce((F,J)=>{const M=Object.keys(Re).filter(Q=>Q===J.id||Q.startsWith(`${J.id}@`)).length;return F+M*J.xp},0),Ue=qe+st,Be=xe+V,ze=Be>0?Math.round(xe/Be*100):0,{currentLevel:Ye}=ye(Ue);return{id:$,name:b.name,username:R,points:Ue,level:Ye.name,performance:ze,posted:xe,notPosted:V,noAnalysis:z,salesPosts:H,instagramLink:b.instagram_link,notes:b.notes,myAchievements:at}})},[E,L,K,ee,ye]),ne=c.useCallback((t,n,l)=>{const w={...l};t.forEach($=>{const P=yr($.id,ee,n);w[$.id]={...w[$.id]||{},...P}});const b=gt(t,n,w);Vt(b)},[gt,ee]);c.useEffect(()=>{f.current.length>0&&ne(f.current,T.current,D.current)},[ee,ne]);const me=c.useCallback(t=>{xt(n=>{const l=t(n);return f.current=l,ne(l,T.current,D.current),l})},[ne]),ue=c.useCallback(async()=>{try{const t=await Pt();xt(t),f.current=t,ne(t,T.current,D.current)}catch(t){console.error("Error loading affiliates:",t)}},[ne]),oe=c.useCallback(async()=>{try{const[t,n,l]=await Promise.all([Ot(),ct(E,L),qt()]),w={...t,...n};window.__calendarStatuses=w,window.__awardedAchievements=l,Ht(w),Jt(l),T.current=w,D.current=l,ne(f.current,w,l)}catch(t){console.error("Error loading metrics:",t)}},[E,L,ne]),Le=c.useCallback(async()=>{await Promise.all([ue(),oe()])},[ue,oe]),Zt=async()=>{if(r&&!r.canUseTool("dashboard-month-clear")){r.notifyToolBlocked();return}if(Te&&typeof ae=="number"){const n=Math.max(0,ae);if(n>0&&Y.length>=n){j.error("Limite do plano Free atingido. Fa√ßa upgrade para continuar."),a("/dashboard/settings");return}}ft(!0),await Lr(E,L)?(j.success("Dados do m√™s apagados com sucesso"),Me(!1),await oe()):j.error("Erro ao apagar dados do m√™s"),ft(!1)};c.useEffect(()=>{ue()},[ue]),c.useEffect(()=>{oe()},[oe]),c.useEffect(()=>{let t,n=!1,l=null,w=0;const b=()=>{if(n)return;l!==null&&window.clearTimeout(l);const P=Math.min(3e4,1e3*Math.pow(2,w));w=Math.min(6,w+1),l=window.setTimeout(()=>{$()},P)},$=async()=>{const P=await de();n||!P||(t&&(N.removeChannel(t),t=null),t=N.channel(`realtime:affiliates:${P.id}`).on("postgres_changes",{event:"*",schema:"public",table:"affiliates",filter:`owner_user_id=eq.${P.id}`},R=>{const ie=R?.eventType,q=R?.new,xe=R?.old;if(ie==="DELETE"){const V=xe?.id;V&&me(z=>z.filter(H=>H?.id!==V));return}if(q?.id){if(q.status&&q.status!=="active"){me(V=>V.filter(z=>z?.id!==q.id));return}me(V=>{const z=V.findIndex(H=>H?.id===q.id);if(z>=0){const H=[...V];return H[z]={...V[z],...q},H}return[q,...V]})}}).subscribe(R=>{if(!n){if(R==="SUBSCRIBED"){w=0,l!==null&&(window.clearTimeout(l),l=null);return}(R==="CHANNEL_ERROR"||R==="TIMED_OUT"||R==="CLOSED")&&b()}}))};return rt.current=()=>{n||(w=0,l!==null&&(window.clearTimeout(l),l=null),$())},$(),()=>{n=!0,rt.current=null,l!==null&&(window.clearTimeout(l),l=null),t&&N.removeChannel(t)}},[me]),c.useEffect(()=>{if(!se)return;let t=0;const n=()=>{const l=pe.current;if(typeof l!="number")return;if(Date.now()-l>15e3){try{te.current?.abort()}catch{}te.current=null,pe.current=null,je(!1),ue();return}t=window.requestAnimationFrame(n)};return t=window.requestAnimationFrame(n),()=>window.cancelAnimationFrame(t)},[se,ue]),c.useEffect(()=>{const t=()=>{if(document.visibilityState==="visible"){if(se){try{te.current?.abort()}catch{}te.current=null,pe.current=null,je(!1)}try{N?.realtime?.connect?.()}catch{}try{N?.auth?.refreshSession?.()}catch{}rt.current?.(),Le()}},n=()=>{if(se){try{te.current?.abort()}catch{}te.current=null,pe.current=null,je(!1)}},l=()=>oe(),w=()=>oe();return window.addEventListener("focus",t),document.addEventListener("visibilitychange",t),window.addEventListener("online",t),window.addEventListener("pageshow",t),window.addEventListener("resume",t),window.addEventListener("freeze",n),window.addEventListener("pagehide",n),window.addEventListener("achievement-awarded",l),window.addEventListener("calendar-status-updated",w),()=>{window.removeEventListener("focus",t),document.removeEventListener("visibilitychange",t),window.removeEventListener("online",t),window.removeEventListener("pageshow",t),window.removeEventListener("resume",t),window.removeEventListener("freeze",n),window.removeEventListener("pagehide",n),window.removeEventListener("achievement-awarded",l),window.removeEventListener("calendar-status-updated",w)}},[Le,oe,se]);const[re,Ne]=c.useState({nome:"",instagram:"",link:"",observacoes:""}),pt=t=>{const n=t==="prev"?-1:1,l=new Date(v,g+n,1);m(l.getFullYear()),k(l.getMonth())},er=new Date(v,g,1).toLocaleString("pt-BR",{month:"long"}),ke=c.useCallback(async()=>{try{const[t,n,l,w]=await Promise.all([Pt(),Ot(),ct(v,g),qt()]),b={...n,...l},$=`${v}-${String(g+1).padStart(2,"0")}`,P=t.map(R=>{const ie=R.id,q=typeof R.instagram=="string"?R.instagram.trim():"",xe=q?q.startsWith("@")?q:`@${q}`:"",z=Object.entries(b).filter(([M])=>M.startsWith(`${ie}:`)).filter(([M])=>M.includes(`:${$}-`)),H=z.filter(([,M])=>K.find(fe=>fe.key===M)?.type==="positive").length,qe=z.filter(([,M])=>K.find(fe=>fe.key===M)?.type==="negative").length,Re=z.filter(([,M])=>M==="sem_analise").length,at=z.filter(([,M])=>M==="postou_vendas").length,st=z.reduce((M,[,Q])=>{const fe=K.find(We=>We.key===Q);return M+(fe?.points||0)},0),Ue=w[ie]||{},Be=ee.reduce((M,Q)=>{const fe=Object.keys(Ue).filter(We=>We===Q.id||We.startsWith(`${Q.id}@`)).length;return M+fe*Q.xp},0),ze=st+Be,Ye=H+qe,F=Ye>0?Math.round(H/Ye*100):0,{currentLevel:J}=ye(ze);return{id:ie,name:R.name,username:xe,points:ze,level:J.name,performance:F,posted:H,notPosted:qe,noAnalysis:Re,salesPosts:at}});y(P)}catch(t){console.error("Error refreshing metrics data:",t)}},[v,g,K,ee,ye]);c.useEffect(()=>{ke()},[ke]);const bt=new Date(E,L,1).toLocaleString("pt-BR",{month:"long"}),Ie=t=>{window.openLegacyCalendar?.({id:t.id,nome:t.name})},tr=async()=>{if(r&&!r.canUseTool("dashboard-affiliate-add")){r.notifyToolBlocked();return}const{nome:t,instagram:n,link:l,observacoes:w}=re;if(!t.trim()){j("Preencha o nome");return}if(Te&&typeof ae=="number"){const $=Math.max(0,ae);if($>0&&Y.length>=$){j.error("Limite do plano Free atingido. Fa√ßa upgrade para continuar."),a("/dashboard/settings");return}}if(se)return;try{te.current?.abort()}catch{}const b=new AbortController;te.current=b,pe.current=Date.now(),je(!0);try{const $=n.trim(),P=await Tr(t.trim(),$||null,l.trim(),w?.trim(),{signal:b.signal});P&&(Ne({nome:"",instagram:"",link:"",observacoes:""}),j.success("Afiliada adicionada com sucesso"),me(R=>[P,...R.filter(ie=>ie?.id!==P.id)]),s==="metricas"&&ke()),Le()}catch($){($ instanceof Error?$.message:String($)).toLowerCase().includes("abort")?ue():(console.error("Error adding affiliate:",$),j.error("Erro ao adicionar afiliada. Tente novamente."))}finally{pe.current=null,te.current=null,je(!1)}},[rr,Fe]=c.useState(!1),[Pe,wt]=c.useState(null),vt=t=>{wt({id:t.id,name:t.name}),Fe(!0)},ar=async()=>{if(!Pe)return;if(r&&!r.canUseTool("dashboard-affiliate-delete")){r.notifyToolBlocked();return}if(Te&&typeof ae=="number"){const n=Math.max(0,ae);if(n>0&&Y.length>=n){j.error("Limite do plano Free atingido. Fa√ßa upgrade para continuar."),a("/dashboard/settings");return}}await Mr(Pe.id)&&(j.success("Afiliada removida com sucesso"),Fe(!1),wt(null),me(n=>n.filter(l=>l?.id!==Pe.id)),s==="metricas"&&await ke())},[sr,Oe]=c.useState(!1),[O,be]=c.useState(null),yt=t=>{be({...t,instagram:t.username.replace("@","")}),Oe(!0)},nr=async()=>{if(!O)return;if(r&&!r.canUseTool("dashboard-affiliate-save")){r.notifyToolBlocked();return}if(Te&&typeof ae=="number"){const w=Math.max(0,ae);if(w>0&&Y.length>=w){j.error("Limite do plano Free atingido. Fa√ßa upgrade para continuar."),a("/dashboard/settings");return}}const t=String(O.name||"").trim(),n=String(O.instagram||"").trim();if(!t){j.error("Preencha o nome");return}await $r(O.id,{name:t,instagram:n||null,instagram_link:O.instagramLink,notes:O.notes})&&(j.success("Afiliada atualizada com sucesso"),Oe(!1),be(null),me(w=>w.map(b=>b?.id===O.id?{...b,name:t,instagram:n||null,instagram_link:O.instagramLink,notes:O.notes}:b)),s==="metricas"&&await ke())},jt=t=>{const n=t==="prev"?-1:1,l=new Date(E,L+n,1);p(l.getFullYear()),X(l.getMonth())};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-background",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${I.gradientFrom} ${I.gradientVia} ${I.gradientTo} opacity-10`}),e.jsx("div",{className:"glass-card border-b border-border/50 backdrop-blur-xl",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-3 animate-fade-in",id:"dashboard-banner",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-2xl bg-primary/10 border border-primary/20",children:e.jsx($t,{className:"w-8 h-8 text-primary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-foreground",children:I.title}),e.jsx("button",{onClick:()=>Z(!0),className:"p-2 rounded-xl hover:bg-muted text-muted-foreground hover:text-primary transition-colors",title:"Editar Banner",children:e.jsx(Ge,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mt-1",children:I.description})]})]})})})})]}),e.jsx(_e,{open:ce,onOpenChange:Z,children:e.jsxs(Ce,{className:"w-[95vw] sm:w-full max-w-lg bg-background/90 backdrop-blur-2xl border-none shadow-2xl rounded-3xl p-0 overflow-hidden",children:[e.jsx(Se,{className:"sr-only",children:"Personalizar Banner"}),e.jsxs("div",{className:`relative h-32 bg-gradient-to-br ${B.gradientFrom} ${B.gradientVia} ${B.gradientTo}`,children:[e.jsx("div",{className:"absolute inset-0 bg-background/40 backdrop-blur-[2px]"}),e.jsxs("div",{className:"absolute bottom-6 left-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Personalizar Banner"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Edite o t√≠tulo e visual do painel"})]})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"T√≠tulo do Painel"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{value:B.title,onChange:t=>ge({...B,title:t.target.value}),className:"w-full bg-muted/50 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-muted font-medium",placeholder:"Ex: Painel de Gest√£o"})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Descri√ß√£o"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{value:B.description,onChange:t=>ge({...B,description:t.target.value}),className:"w-full bg-muted/50 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-muted font-medium",placeholder:"Ex: Acompanhe o desempenho..."})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Estilo do Gradiente"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{from:"from-primary",via:"via-secondary",to:"to-accent",label:"Neon"},{from:"from-blue-500",via:"via-cyan-500",to:"to-teal-500",label:"Ocean"},{from:"from-purple-500",via:"via-pink-500",to:"to-red-500",label:"Sunset"},{from:"from-green-500",via:"via-emerald-500",to:"to-lime-500",label:"Nature"},{from:"from-yellow-500",via:"via-orange-500",to:"to-red-500",label:"Fire"},{from:"from-gray-500",via:"via-gray-400",to:"to-gray-300",label:"Mono"}].map((t,n)=>e.jsx("button",{onClick:()=>ge({...B,gradientFrom:t.from,gradientVia:t.via,gradientTo:t.to}),className:`h-12 rounded-xl bg-gradient-to-r ${t.from} ${t.via} ${t.to} opacity-80 hover:opacity-100 transition-all duration-300 ring-2 ring-offset-2 ring-offset-background ${B.gradientFrom===t.from?"ring-primary scale-105":"ring-transparent hover:scale-105"}`,title:t.label},n))})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>Z(!1),className:"flex-1 px-6 py-3 rounded-xl font-medium text-muted-foreground hover:bg-gray-100 dark:hover:bg-white/5 transition-colors duration-300",children:"Cancelar"}),e.jsx("button",{onClick:zt,className:"flex-[2] px-6 py-3 rounded-xl font-bold bg-gradient-to-r from-primary to-secondary text-white shadow-lg shadow-primary/25 hover:shadow-primary/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300",children:"Salvar Altera√ß√µes"})]})]})]})}),e.jsx(_e,{open:rr,onOpenChange:Fe,children:e.jsxs(Ce,{className:"w-[95vw] sm:w-full max-w-md bg-white/90 dark:bg-black/90 backdrop-blur-2xl border-none shadow-2xl rounded-3xl p-0 overflow-hidden",children:[e.jsx(Se,{className:"sr-only",children:"Remover Afiliado"}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(Ee,{className:"w-8 h-8 text-destructive"})}),e.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:"Remover Afiliado?"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:["Tem certeza que deseja remover ",e.jsx("strong",{children:Pe?.name}),"? Esta a√ß√£o n√£o pode ser desfeita e todos os dados ser√£o perdidos."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Fe(!1),className:"flex-1 px-4 py-3 rounded-xl font-medium text-muted-foreground hover:bg-muted transition-colors duration-300",children:"Cancelar"}),e.jsx("button",{onClick:ar,className:"flex-1 px-4 py-3 rounded-xl font-bold bg-destructive text-white shadow-lg shadow-destructive/25 hover:shadow-destructive/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300",children:"Sim, Remover"})]})]})]})}),e.jsx(_e,{open:Kt,onOpenChange:Me,children:e.jsxs(Ce,{className:"w-[95vw] sm:w-full max-w-md bg-white/90 dark:bg-black/90 backdrop-blur-2xl border-none shadow-2xl rounded-3xl p-0 overflow-hidden",children:[e.jsx(Se,{className:"sr-only",children:"Apagar dados do m√™s"}),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(Ee,{className:"w-8 h-8 text-destructive"})}),e.jsx("h2",{className:"text-xl font-bold text-foreground mb-2",children:"Apagar dados do m√™s?"}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-6",children:["Esta a√ß√£o remove todos os registros de todas as afiliadas para ",bt," de ",E,". Esta opera√ß√£o n√£o pode ser desfeita."]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>Me(!1),className:"flex-1 px-4 py-3 rounded-xl font-medium text-muted-foreground hover:bg-muted transition-colors duration-300",disabled:tt,children:"Cancelar"}),e.jsx("button",{onClick:Zt,className:"flex-1 px-4 py-3 rounded-xl font-bold bg-destructive text-white shadow-lg shadow-destructive/25 hover:shadow-destructive/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 disabled:opacity-60 disabled:hover:scale-100",disabled:tt,children:tt?"Apagando...":"Sim, apagar"})]})]})]})}),e.jsx(_e,{open:sr,onOpenChange:Oe,children:e.jsxs(Ce,{className:"w-[95vw] sm:w-full max-w-lg bg-white/90 dark:bg-black/90 backdrop-blur-2xl border-none shadow-2xl rounded-3xl p-0 overflow-hidden",children:[e.jsx(Se,{className:"sr-only",children:"Editar Afiliado"}),e.jsxs("div",{className:"relative h-24 bg-gradient-to-br from-primary/20 via-secondary/20 to-accent/20",children:[e.jsx("div",{className:"absolute inset-0 bg-white/40 dark:bg-black/40 backdrop-blur-[2px]"}),e.jsxs("div",{className:"absolute bottom-6 left-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Editar Afiliado"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Atualize os dados do perfil"})]})]}),O&&e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Nome Completo"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{value:O.name,onChange:t=>be({...O,name:t.target.value}),className:"w-full bg-gray-50 dark:bg-white/5 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 font-medium",placeholder:"Nome do afiliado"})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Instagram (sem @)"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{value:O.instagram,onChange:t=>be({...O,instagram:t.target.value}),className:"w-full bg-gray-50 dark:bg-white/5 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 font-medium",placeholder:"usuario"})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Link do Instagram"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{value:O.instagramLink||"",onChange:t=>be({...O,instagramLink:t.target.value}),className:"w-full bg-gray-50 dark:bg-white/5 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 font-medium",placeholder:"https://instagram.com/..."})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Observa√ß√µes"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{value:O.notes||"",onChange:t=>be({...O,notes:t.target.value}),className:"w-full bg-gray-50 dark:bg-white/5 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 font-medium",placeholder:"Anota√ß√µes gerais..."})})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>Oe(!1),className:"flex-1 px-6 py-3 rounded-xl font-medium text-muted-foreground hover:bg-gray-100 dark:hover:bg-white/5 transition-colors duration-300",children:"Cancelar"}),e.jsx("button",{onClick:nr,className:"flex-[2] px-6 py-3 rounded-xl font-bold bg-gradient-to-r from-primary to-secondary text-white shadow-lg shadow-primary/25 hover:shadow-primary/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300",children:"Salvar Altera√ß√µes"})]})]})]})}),e.jsx(_e,{open:De,onOpenChange:Ze,children:e.jsx(Ce,{className:"w-[95vw] sm:w-full max-w-md max-h-[90vh] overflow-y-auto bg-background/95 backdrop-blur-2xl border-none shadow-2xl rounded-3xl p-0",children:e.jsxs("div",{className:"p-6",children:[e.jsx(wr,{children:e.jsxs(Se,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-yellow-500"}),"Como funcionam as Regras"]})}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Esta aba exibe as regras atuais e ativas do seu sistema de gamifica√ß√£o."}),e.jsxs("div",{className:"bg-secondary/10 p-4 rounded-xl border border-secondary/20 space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-foreground text-sm flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4 text-secondary"}),"Sincroniza√ß√£o Autom√°tica"]}),e.jsxs("p",{className:"text-sm text-muted-foreground leading-relaxed",children:['Essa aba "Regras" serve para explicar o funcionamento de cada ferramenta da gamifica√ß√£o.',e.jsx("br",{}),e.jsx("br",{}),"Ao criar ou editar um novo ",e.jsx("strong",{children:"n√≠vel"}),", ",e.jsx("strong",{children:"classe"})," (pontua√ß√£o) ou ",e.jsx("strong",{children:"conquista"})," na p√°gina de ",e.jsx("span",{className:"text-foreground font-medium",children:"Gamifica√ß√£o"}),', essas altera√ß√µes aparecer√£o automaticamente nos campos respectivos desta aba "Regras".']})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"bg-primary/10 text-primary rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold shrink-0 mt-0.5",children:"1"}),e.jsx("span",{children:'Configure os pontos e regras no painel "Gamifica√ß√£o".'})]}),e.jsxs("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"bg-primary/10 text-primary rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold shrink-0 mt-0.5",children:"2"}),e.jsx("span",{children:"Visualize aqui como o sistema de n√≠veis, classes e conquistas funcionam para os suas afiliadas."})]}),e.jsxs("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[e.jsx("span",{className:"bg-primary/10 text-primary rounded-full w-5 h-5 flex items-center justify-center text-xs font-bold shrink-0 mt-0.5",children:"3"}),e.jsx("span",{children:"Ap√≥s ter configurado as regras do seu jeito, voc√™ pode mostrar essa aba de Regras para que suas afiliadas entendam como funciona a sua gamifica√ß√£o."})]})]})]}),e.jsx(vr,{className:"mt-6",children:e.jsx(Xe,{onClick:()=>Ze(!1),className:"w-full sm:w-auto",children:"Entendi"})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 -mt-6",children:e.jsxs(pr,{value:s,onValueChange:i,className:"w-full",children:[e.jsxs("div",{className:"flex flex-col items-center gap-4 mb-8",children:[e.jsx("div",{id:"dashboard-tabs",children:e.jsxs(br,{className:"relative h-auto bg-gray-100/50 dark:bg-white/5 backdrop-blur-xl border border-black/5 dark:border-white/10 p-1.5 rounded-2xl inline-flex w-full sm:w-auto shadow-sm",children:[e.jsxs(ot,{value:"dashboard",className:"relative z-10 flex-1 sm:flex-none flex items-center justify-center gap-2 rounded-xl px-2 sm:px-6 py-3 text-xs sm:text-sm font-medium text-muted-foreground transition-all duration-300 data-[state=active]:bg-white dark:data-[state=active]:bg-white/10 data-[state=active]:text-primary dark:data-[state=active]:text-primary data-[state=active]:shadow-md dark:data-[state=active]:shadow-sm dark:data-[state=active]:shadow-black/50 hover:text-foreground dark:hover:text-white min-w-0 sm:min-w-[120px]",children:[e.jsx($t,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"truncate",children:"Dashboard"})]}),e.jsxs(ot,{value:"gamificacao","aria-label":"Regras",className:"relative z-10 flex-1 sm:flex-none flex items-center justify-center gap-2 rounded-xl px-2 sm:px-6 py-3 text-xs sm:text-sm font-medium text-muted-foreground transition-all duration-300 data-[state=active]:bg-white dark:data-[state=active]:bg-white/10 data-[state=active]:text-primary dark:data-[state=active]:text-primary data-[state=active]:shadow-md dark:data-[state=active]:shadow-sm dark:data-[state=active]:shadow-black/50 hover:text-foreground dark:hover:text-white min-w-0 sm:min-w-[120px]",children:[e.jsx(nt,{className:"w-4 h-4 shrink-0","aria-hidden":"true",focusable:"false"}),e.jsx("span",{className:"truncate",children:"Regras"})]}),e.jsxs(ot,{value:"metricas",className:"relative z-10 flex-1 sm:flex-none flex items-center justify-center gap-2 rounded-xl px-2 sm:px-6 py-3 text-xs sm:text-sm font-medium text-muted-foreground transition-all duration-300 data-[state=active]:bg-white dark:data-[state=active]:bg-white/10 data-[state=active]:text-primary dark:data-[state=active]:text-primary data-[state=active]:shadow-md dark:data-[state=active]:shadow-sm dark:data-[state=active]:shadow-black/50 hover:text-foreground dark:hover:text-white min-w-0 sm:min-w-[120px]",children:[e.jsx(jr,{className:"w-4 h-4 shrink-0"}),e.jsx("span",{className:"truncate",children:"Ranking"})]})]})}),s==="dashboard"&&e.jsxs(Xe,{onClick:Wt,variant:"outline",className:"flex gap-2 bg-white/10 hover:bg-white/20 border-white/20 text-foreground px-6",children:[e.jsx(Ve,{className:"w-4 h-4 text-yellow-500"}),"Como usar"]})]}),e.jsxs(it,{value:"dashboard",className:"space-y-6 sm:space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 relative",id:"dashboard-stats",children:[e.jsx(le,{hover:!0,className:"group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10 border border-primary/20 group-hover:border-primary/40 transition-all duration-300",children:e.jsx(kt,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-foreground",children:Xt.length}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Total de Afiliadas Ativas"})]})]})}),e.jsx(le,{hover:!0,className:"group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-accent/10 border border-accent/20 group-hover:border-accent/40 transition-all duration-300",children:e.jsx(Mt,{className:"w-5 h-5 sm:w-6 sm:h-6 text-accent"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-3xl sm:text-4xl font-bold text-foreground",children:[Y.length>0?Math.round(Y.reduce((t,n)=>t+(n.performance||0),0)/Y.length):0,"%"]}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Taxa M√©dia de Cumprimento"})]})]})}),e.jsx(le,{hover:!0,className:"group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-secondary/10 border border-secondary/20 group-hover:border-secondary/40 transition-all duration-300",children:e.jsx(Lt,{className:"w-5 h-5 sm:w-6 sm:h-6 text-secondary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-3xl sm:text-4xl font-bold text-foreground",children:Y.filter(t=>(t.posted||0)===0).length}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Afiliadas sem postagem no m√™s"}),e.jsx("div",{className:"text-xs text-muted-foreground/70",children:"Com base no m√™s selecionado"})]})]})}),e.jsx(le,{hover:!0,className:"group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 rounded-xl bg-primary/10 border border-primary/20 group-hover:border-primary/40 transition-all duration-300",children:e.jsx(Nr,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-foreground",children:Y.length>0?[...Y].sort((t,n)=>(n.points||0)-(t.points||0))[0].name:"N/A"}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:"Afiliada Destaque"}),e.jsx("div",{className:"text-xs text-muted-foreground/70",children:Y.length>0?`${[...Y].sort((t,n)=>(n.points||0)-(t.points||0))[0].points} pts`:"Sem dados"})]})]})})]}),e.jsxs(le,{className:"animate-scale-in",id:"dashboard-add-affiliate",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold mb-6 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(lt,{className:"w-5 h-5 text-primary"})}),e.jsx("span",{className:"text-foreground",children:"Adicionar Nova Afiliada"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-foreground",children:"Nome Completo"}),e.jsx(we,{value:re.nome,onChange:t=>Ne({...re,nome:t.target.value}),placeholder:"",className:"glass-card border-border/50 focus:border-primary transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-foreground",children:"Instagram (sem @)"}),e.jsx(we,{value:re.instagram,onChange:t=>Ne({...re,instagram:t.target.value}),placeholder:"",className:"glass-card border-border/50 focus:border-primary transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-foreground",children:"Link do Instagram"}),e.jsx(we,{value:re.link,onChange:t=>Ne({...re,link:t.target.value}),placeholder:"https://instagram.com/usuario",className:"glass-card border-border/50 focus:border-primary transition-all"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium text-foreground",children:"Observa√ß√µes"}),e.jsx(we,{value:re.observacoes,onChange:t=>Ne({...re,observacoes:t.target.value}),placeholder:"",className:"glass-card border-border/50 focus:border-primary transition-all"})]})]}),e.jsxs(Xe,{onClick:tr,disabled:se,className:"w-full bg-primary hover:bg-primary/90 text-primary-foreground py-4 sm:py-6 text-sm sm:text-lg font-semibold transition-all duration-300 disabled:opacity-60",children:[e.jsx(lt,{className:"w-4 h-4 sm:w-5 sm:h-5 mr-2"}),se?"Adicionando...":"Adicionar Afiliada"]})]}),e.jsxs(le,{id:"dashboard-list",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-primary/10 border border-primary/20",children:e.jsx(kt,{className:"w-5 h-5 text-primary"})}),e.jsx("span",{className:"text-foreground",children:"Gerenciar Afiliadas"})]}),e.jsxs("div",{className:"flex flex-col xl:flex-row items-stretch xl:items-center gap-3 w-full xl:w-auto mt-4 sm:mt-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[e.jsxs("div",{className:"relative glass-card flex items-center justify-between sm:justify-center gap-2 px-3 sm:px-4 py-2 rounded-xl border border-border/50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4 text-primary"}),e.jsxs("span",{className:"text-xs sm:text-sm font-medium whitespace-nowrap min-w-[100px] text-center",children:[bt," de ",E]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>jt("prev"),className:"p-1 hover:bg-primary/10 rounded-lg text-primary hover:scale-110 transition-all",children:e.jsx(_t,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>jt("next"),className:"p-1 hover:bg-primary/10 rounded-lg text-primary hover:scale-110 transition-all",children:e.jsx(Ct,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex items-center gap-2 justify-between sm:justify-start",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>o("grid"),className:`p-2 rounded-lg transition-all duration-300 ${d==="grid"?"bg-primary text-primary-foreground":"glass-card border border-border/50"}`,children:e.jsx(Ar,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o("list"),className:`p-2 rounded-lg transition-all duration-300 ${d==="list"?"bg-primary text-primary-foreground":"glass-card border border-border/50"}`,children:e.jsx(kr,{className:"w-4 h-4"})})]}),e.jsxs("button",{onClick:()=>Me(!0),className:"flex-1 sm:flex-none flex items-center justify-center gap-2 px-3 py-2 h-9 rounded-lg text-xs sm:text-sm font-medium bg-destructive/10 text-destructive hover:bg-destructive/20 transition-colors border border-destructive/30 whitespace-nowrap",title:"Apagar dados do m√™s",children:[e.jsx(Ee,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Apagar m√™s"})]})]})]}),e.jsxs("div",{className:"relative w-full xl:w-64",children:[e.jsx(Tt,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(we,{value:et,onChange:t=>Qt(t.target.value),placeholder:"Buscar afiliada...",className:"pl-9 w-full glass-card border-border/50 focus:border-primary transition-all text-xs sm:text-sm"})]})]})]}),d==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:ht.map(t=>e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-black/5 dark:bg-white/5 border border-transparent p-1 transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 dark:hover:shadow-black/40",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs("div",{className:"relative h-full rounded-xl bg-gray-50/50 dark:bg-black/40 p-4 transition-colors duration-300 group-hover:bg-white dark:group-hover:bg-black/30",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxs("div",{className:"relative w-12 h-12 shrink-0",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full animate-pulse group-hover:animate-none"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-primary font-bold text-lg bg-white dark:bg-white/10 rounded-full border-2 border-primary/20 group-hover:border-primary transition-colors duration-300",children:t.name.charAt(0)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-base text-foreground truncate group-hover:text-primary transition-colors",children:t.name}),e.jsx("div",{className:"text-xs text-muted-foreground truncate mb-0.5",children:t.username}),e.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium",children:[e.jsxs("span",{className:"text-primary bg-primary/10 px-2 py-0.5 rounded-full",children:[t.points," pts"]}),e.jsx("span",{className:"text-muted-foreground",children:"‚Ä¢"}),e.jsx("span",{className:"text-muted-foreground",children:t.level})]})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs font-medium",children:[e.jsx("span",{className:"text-muted-foreground",children:"Performance"}),e.jsx("span",{className:t.performance&&t.performance>=80?"text-green-500":"text-primary",children:t.performance?`${t.performance}%`:"0%"})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-white/5 rounded-full h-1.5 overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${t.performance&&t.performance>=80?"bg-gradient-to-r from-green-500 to-emerald-400":"bg-gradient-to-r from-primary to-blue-400"}`,style:{width:`${t.performance||0}%`}})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"text-xs font-medium text-muted-foreground mb-2 flex items-center justify-between",children:[e.jsx("span",{children:"Conquistas"}),e.jsx("span",{className:"text-[10px] bg-primary/10 text-primary px-1.5 py-0.5 rounded-md",children:t.myAchievements?.length||0})]}),e.jsxs("div",{className:"flex items-center gap-1.5 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-thin scrollbar-thumb-primary/10 scrollbar-track-transparent",children:[(!t.myAchievements||t.myAchievements.length===0)&&e.jsx("div",{className:"text-[10px] text-muted-foreground/50 italic w-full text-center py-1",children:"Nenhuma conquista"}),t.myAchievements?.map(n=>e.jsxs(fr,{delayDuration:0,children:[e.jsx(hr,{asChild:!0,children:e.jsx("div",{className:"w-7 h-7 shrink-0 rounded-lg bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border border-yellow-500/20 flex items-center justify-center text-sm hover:scale-110 hover:shadow-sm hover:border-yellow-500/50 transition-all cursor-help group/ach",children:n.icon?.startsWith("http")?e.jsx("img",{src:n.icon,alt:"",className:"w-full h-full object-cover rounded-lg"}):e.jsx("span",{className:"leading-none group-hover/ach:animate-bounce",children:n.icon||"üèÜ"})})}),e.jsx(gr,{side:"top",className:"max-w-[200px]",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"shrink-0 text-lg",children:n.icon||"üèÜ"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-bold text-foreground",children:n.title}),e.jsx("div",{className:"text-[10px] text-muted-foreground leading-tight mt-0.5",children:n.description}),e.jsxs("div",{className:"text-[10px] text-yellow-500 font-bold mt-1",children:["+",n.xp," XP"]})]})]})})]},n.id))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 py-3 border-t border-gray-200 dark:border-white/5 mb-4",children:[e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gray-100/50 dark:bg-white/5 group-hover:bg-white dark:group-hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"text-accent font-bold text-sm",children:t.posted}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mt-0.5",children:"Dia Positivo"})]}),e.jsxs("div",{className:"text-center p-2 rounded-lg bg-gray-100/50 dark:bg-white/5 group-hover:bg-white dark:group-hover:bg-white/10 transition-colors",children:[e.jsx("div",{className:"text-destructive font-bold text-sm",children:t.notPosted}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mt-0.5",children:"Dia Negativo"})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>yt(t),className:"flex-1 h-9 rounded-lg bg-gray-100 dark:bg-white/5 text-muted-foreground hover:text-primary hover:bg-primary/10 dark:hover:bg-primary/20 transition-all duration-300 flex items-center justify-center group/btn",title:"Editar","aria-label":"Editar afiliado",children:e.jsx(Ge,{className:"w-4 h-4 group-hover/btn:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>{t.instagramLink?window.open(t.instagramLink,"_blank"):j.error("Link do Instagram n√£o cadastrado")},className:`flex-1 h-9 rounded-lg bg-gray-100 dark:bg-white/5 text-muted-foreground transition-all duration-300 flex items-center justify-center group/btn ${t.instagramLink?"hover:text-[#E1306C] hover:bg-[#E1306C]/10":"opacity-50 cursor-not-allowed hover:bg-transparent hover:text-muted-foreground"}`,title:t.instagramLink?"Visitar Instagram":"Link n√£o cadastrado","aria-label":"Visitar Instagram do afiliado",children:e.jsx(At,{className:"w-4 h-4 group-hover/btn:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>vt(t),className:"flex-1 h-9 rounded-lg bg-gray-100 dark:bg-white/5 text-muted-foreground hover:text-destructive hover:bg-destructive/10 dark:hover:bg-destructive/20 transition-all duration-300 flex items-center justify-center group/btn",title:"Excluir","aria-label":"Excluir afiliado",children:e.jsx(Ee,{className:"w-4 h-4 group-hover/btn:scale-110 transition-transform"})})]}),e.jsxs("button",{onClick:()=>Ie(t),className:"w-full h-9 rounded-lg border border-primary/20 bg-primary/5 text-primary hover:bg-primary/10 transition-all duration-300 flex items-center justify-center gap-2 group/btn font-medium text-sm",title:"Calend√°rio","aria-label":"Ver calend√°rio",children:[e.jsx(ve,{className:"w-4 h-4 group-hover/btn:scale-110 transition-transform"}),e.jsx("span",{children:"Calend√°rio"})]}),t.noRegistro&&e.jsx("button",{onClick:()=>Ie(t),className:"w-full mt-3 bg-gradient-to-r from-primary to-secondary text-white rounded-lg py-2.5 text-xs font-bold uppercase tracking-wide shadow-lg shadow-primary/20 hover:shadow-primary/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300",children:"Come√ßar a marcar"})]})]},t.id))}):e.jsx("div",{className:"space-y-3",children:ht.map(t=>e.jsxs("div",{className:"glass-card-hover border border-border/50 rounded-2xl p-4 group",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsxs("div",{className:"relative w-12 h-12 shrink-0",children:[e.jsx("div",{className:"absolute inset-0 bg-primary/20 rounded-full"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-primary font-bold text-lg bg-white dark:bg-white/10 rounded-full border-2 border-primary/20 group-hover:border-primary transition-colors duration-300",children:t.name.charAt(0)})]}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"font-bold text-base text-foreground truncate group-hover:text-primary transition-colors",children:t.name}),e.jsx("div",{className:"text-xs text-muted-foreground truncate mb-1",children:t.username}),e.jsxs("div",{className:"flex items-center gap-2 text-xs font-medium flex-wrap",children:[e.jsxs("span",{className:"text-primary bg-primary/10 px-2 py-0.5 rounded-full",children:[t.points," pts"]}),e.jsx("span",{className:"text-muted-foreground",children:"‚Ä¢"}),e.jsx("span",{className:"text-muted-foreground",children:t.level}),e.jsx("span",{className:"text-muted-foreground",children:"‚Ä¢"}),e.jsx("span",{className:t.performance&&t.performance>=80?"text-green-500":"text-primary",children:t.performance?`${t.performance}%`:"0%"})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-accent font-bold text-sm",children:t.posted}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mt-0.5",children:"Dia Positivo"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-destructive font-bold text-sm",children:t.notPosted}),e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-muted-foreground mt-0.5",children:"Dia Negativo"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>yt(t),className:"w-10 h-9 rounded-lg bg-gray-100 dark:bg-white/5 text-muted-foreground hover:text-primary hover:bg-primary/10 dark:hover:bg-primary/20 transition-all duration-300 flex items-center justify-center group/btn",title:"Editar","aria-label":"Editar afiliado",children:e.jsx(Ge,{className:"w-4 h-4 group-hover/btn:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>{t.instagramLink?window.open(t.instagramLink,"_blank"):j.error("Link do Instagram n√£o cadastrado")},className:`w-10 h-9 rounded-lg bg-gray-100 dark:bg-white/5 text-muted-foreground transition-all duration-300 flex items-center justify-center group/btn ${t.instagramLink?"hover:text-[#E1306C] hover:bg-[#E1306C]/10":"opacity-50 cursor-not-allowed hover:bg-transparent hover:text-muted-foreground"}`,title:t.instagramLink?"Visitar Instagram":"Link n√£o cadastrado","aria-label":"Visitar Instagram do afiliado",children:e.jsx(At,{className:"w-4 h-4 group-hover/btn:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>Ie(t),className:"w-10 h-9 rounded-lg bg-gray-100 dark:bg-white/5 text-muted-foreground hover:text-secondary hover:bg-secondary/10 dark:hover:bg-secondary/20 transition-all duration-300 flex items-center justify-center group/btn tutorial-calendar-btn",title:"Calend√°rio","aria-label":"Ver calend√°rio",children:e.jsx(ve,{className:"w-4 h-4 group-hover/btn:scale-110 transition-transform"})}),e.jsx("button",{onClick:()=>vt(t),className:"w-10 h-9 rounded-lg bg-gray-100 dark:bg-white/5 text-muted-foreground hover:text-destructive hover:bg-destructive/10 dark:hover:bg-destructive/20 transition-all duration-300 flex items-center justify-center group/btn",title:"Excluir","aria-label":"Excluir afiliado",children:e.jsx(Ee,{className:"w-4 h-4 group-hover/btn:scale-110 transition-transform"})})]})]})]}),t.noRegistro&&e.jsx("button",{onClick:()=>Ie(t),className:"w-full mt-3 bg-gradient-to-r from-primary to-secondary text-white rounded-lg py-2.5 text-xs font-bold uppercase tracking-wide shadow-lg shadow-primary/20 hover:shadow-primary/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300",children:"Come√ßar a marcar"})]},t.id))})]})]}),e.jsx(it,{value:"gamificacao",className:"space-y-6 sm:space-y-8 animate-fade-in",children:e.jsxs(le,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"p-2 rounded-xl bg-secondary/10 border border-secondary/20",children:e.jsx(Dt,{className:"w-5 h-5 text-secondary"})}),e.jsx("span",{className:"text-foreground",children:"Sistema de Gamifica√ß√£o"})]}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Acompanhe pontua√ß√£o, n√≠veis e conquistas das suas afiliadas"})]}),e.jsxs(Xe,{onClick:()=>Ze(!0),variant:"outline",className:"flex gap-2 bg-white/10 hover:bg-white/20 border-white/20 text-foreground px-4 self-start sm:self-center",children:[e.jsx(Ve,{className:"w-4 h-4 text-yellow-500"}),"Como funciona"]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold flex items-center gap-2 mb-1",children:[e.jsx(nt,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-foreground",children:"Como Funciona a Pontua√ß√£o"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:'Cada a√ß√£o registrada no calend√°rio gera pontos (XP). Exemplo: Ao marcar "Postou Completo", voc√™ ganha 5 XP imediatamente. Esses pontos ajudam voc√™ a subir de n√≠vel e desbloquear novas recompensas.'})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:K.map(t=>{let n=nt;t.key==="postou_vendas"&&(n=lt),t.key==="postou"&&(n=Mt),t.key==="nao_postou"&&(n=Lt),t.key==="sem_analise"&&(n=ve);const l=t.bg||"#9b184e",w=t.textColor||"#111827";return e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl border transition-all duration-300 hover:scale-[1.02] hover:shadow-xl h-full flex flex-col",style:{borderColor:`${l}60`,boxShadow:`0 8px 30px -10px ${l}40`},children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.05] dark:opacity-[0.1] transition-opacity duration-300 group-hover:opacity-20",style:{background:l}}),e.jsxs("div",{className:"relative flex-1 flex flex-col justify-between bg-white/50 dark:bg-black/20 p-5 backdrop-blur-md",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 w-full",children:[e.jsx("div",{className:"rounded-xl p-2.5 bg-white/50 dark:bg-black/20 border shadow-none transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3 shrink-0 dark:!text-white",style:{color:w,borderColor:`${l}30`},children:e.jsx(n,{className:"w-6 h-6"})}),e.jsxs("div",{className:"px-3 py-1 rounded-full text-xs font-bold border backdrop-blur-sm whitespace-nowrap ml-2 shrink-0 dark:!text-white dark:!border-white/20 dark:!bg-white/10",style:{background:`${l}20`,borderColor:`${l}40`,color:w},children:["+",t.points," pts"]})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-start text-left",children:[e.jsx("h4",{className:"text-lg font-bold text-foreground mb-2 dark:group-hover:text-white transition-colors break-words",children:t.label}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed dark:group-hover:text-muted-foreground/80 break-words",children:t.description||""})]})]})]},t.key)})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold flex items-center gap-2 mb-1",children:[e.jsx(St,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-foreground",children:"Como Funciona a Conquista"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Conquistas s√£o marcos especiais de dedica√ß√£o. Exemplo: Manter uma sequ√™ncia de 5 dias postando sem falhar libera um b√¥nus extra de 50 XP. Elas podem ser mensais, semanais ou √∫nicas."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:ee.map(t=>e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-black/5 dark:bg-white/5 border border-transparent p-1 transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 dark:hover:shadow-black/40 h-full",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-yellow-500/10 to-orange-500/5 opacity-0 transition-opacity duration-300 group-hover:opacity-100"}),e.jsxs("div",{className:"relative flex h-full flex-col justify-between rounded-xl bg-white dark:bg-black/40 p-5 backdrop-blur-md transition-colors duration-300 group-hover:bg-white/80 dark:group-hover:bg-black/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 w-full",children:[e.jsx("div",{className:"rounded-xl p-2.5 bg-black/5 dark:bg-white/5 border border-black/5 dark:border-white/10 text-yellow-500 shadow-none transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3 shrink-0",children:t.icon?.startsWith("http")?e.jsx("img",{src:t.icon,alt:"",className:"w-6 h-6 object-cover rounded-md"}):e.jsx("span",{className:"text-xl leading-none",children:t.icon||"üèÜ"})}),e.jsxs("div",{className:"px-3 py-1 rounded-full text-xs font-bold border backdrop-blur-sm bg-yellow-500/10 border-yellow-500/20 text-yellow-600 dark:text-yellow-500 whitespace-nowrap ml-2 shrink-0",children:["+",t.xp," XP"]})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-start text-left",children:[e.jsx("h4",{className:"text-lg font-bold text-foreground mb-2 dark:group-hover:text-white transition-colors break-words",children:t.title}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed dark:group-hover:text-muted-foreground/80 break-words",children:t.description})]})]})]},t.id))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold flex items-center gap-2 mb-1",children:[e.jsx(_r,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-foreground",children:"Como Funcionam os N√≠veis"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Seu n√≠vel reflete sua experi√™ncia total acumulada. Quanto mais XP voc√™ ganha, mais alto voc√™ sobe na hierarquia."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:W.map((t,n)=>{const l=W[n+1],w=l?`${t.minXP} - ${l.minXP} XP`:`${t.minXP}+ XP`;return e.jsxs("div",{className:"group relative overflow-hidden rounded-2xl bg-black/5 dark:bg-white/5 border border-transparent p-1 transition-all duration-300 hover:shadow-lg hover:shadow-primary/5 dark:hover:shadow-black/40 h-full",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${t.color} opacity-0 transition-opacity duration-300 group-hover:opacity-10`}),e.jsxs("div",{className:"relative flex h-full flex-col justify-between rounded-xl bg-white dark:bg-black/40 p-5 backdrop-blur-md transition-colors duration-300 group-hover:bg-white/80 dark:group-hover:bg-black/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 w-full",children:[e.jsx("div",{className:"rounded-xl p-2.5 bg-black/5 dark:bg-white/5 border border-black/5 dark:border-white/10 shadow-none transition-transform duration-300 group-hover:scale-110 group-hover:rotate-3 shrink-0",children:e.jsx("div",{className:`w-6 h-6 rounded-full bg-gradient-to-br ${t.color} flex items-center justify-center text-[10px] font-bold text-white overflow-hidden`,children:t.icon?.startsWith("http")?e.jsx("img",{src:t.icon,alt:"",className:"w-full h-full object-cover"}):t.icon?e.jsx("span",{className:"text-sm leading-none",children:t.icon}):t.name.charAt(0)})}),e.jsxs("div",{className:"px-3 py-1 rounded-full text-xs font-bold border backdrop-blur-sm bg-primary/10 border-primary/20 text-primary whitespace-nowrap ml-2 shrink-0",children:["N√≠vel ",n+1]})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-start text-left",children:[e.jsx("h4",{className:"text-lg font-bold text-foreground mb-2 dark:group-hover:text-white transition-colors break-words",children:t.name}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground leading-relaxed dark:group-hover:text-muted-foreground/80 break-words",children:["Faixa de XP: ",e.jsx("span",{className:"font-mono font-bold text-foreground",children:w})]})]})]})]},t.id)})})]}),e.jsx("div",{className:"glass-card border-l-4 border-primary rounded-xl p-4 mb-8",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10 border border-primary/20 flex-shrink-0",children:e.jsx(Ve,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-foreground mb-1 text-sm sm:text-base",children:"Dica:"}),e.jsx("div",{className:"text-xs sm:text-sm text-muted-foreground",children:"Complete conquistas para ganhar pontos extras! Cada conquista tem sua pr√≥pria recompensa em pontos."})]})]})})]})}),e.jsx(it,{value:"metricas",className:"space-y-6 sm:space-y-8 animate-fade-in",children:e.jsx(le,{children:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[e.jsxs("h3",{className:"text-base sm:text-lg font-bold flex items-center gap-2",children:[e.jsx(Dt,{className:"w-5 h-5 text-secondary"}),e.jsx("span",{className:"text-foreground",children:"Ranking de Pontua√ß√£o"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 sm:gap-4",children:[e.jsxs("div",{className:"relative w-full sm:w-auto",children:[e.jsx(Tt,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),e.jsx(we,{value:C,onChange:t=>A(t.target.value),placeholder:"Buscar afiliada...",className:"pl-10 w-full sm:w-64 glass-card border-border/50 focus:border-primary transition-all"})]}),e.jsxs("div",{className:"relative glass-card flex items-center gap-2 px-3 sm:px-4 py-2 rounded-xl border border-border/50",children:[e.jsx(ve,{className:"w-4 h-4 text-primary"}),e.jsx("button",{onClick:()=>pt("prev"),className:"text-primary hover:scale-110 transition-transform",children:e.jsx(_t,{className:"w-4 h-4"})}),e.jsxs("span",{className:"text-xs sm:text-sm font-medium",children:[er," de ",v]}),e.jsx("button",{onClick:()=>pt("next"),className:"text-primary hover:scale-110 transition-transform",children:e.jsx(Ct,{className:"w-4 h-4"})})]})]})]}),e.jsx("div",{className:"space-y-3",children:[...S].sort((t,n)=>n.points-t.points).map((t,n)=>({...t,rank:n+1})).filter(t=>t.name.toLowerCase().includes(C.toLowerCase())).map(t=>{const{currentLevel:n,nextLevel:l,progress:w}=ye(t.points),b=t.rank===1;return e.jsxs("div",{className:`glass-card-hover rounded-2xl border border-border/50 group relative overflow-hidden transition-all duration-500 ${b?"bg-gradient-to-r from-yellow-500/10 to-transparent border-yellow-500/30 pt-9 pb-5 px-4":"p-4"}`,children:[b&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-yellow-400/5 via-transparent to-transparent animate-shimmer",style:{backgroundSize:"200% 100%"}}),e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 flex-wrap sm:flex-nowrap relative z-10",children:[e.jsxs("div",{className:`w-12 h-12 sm:w-14 sm:h-14 rounded-full flex items-center justify-center font-bold text-lg flex-shrink-0 transition-all duration-300 relative ${b?"bg-yellow-500/20 text-yellow-500 border-2 border-yellow-500":"bg-primary/20 text-primary border-2 border-primary/40 group-hover:border-primary"}`,children:[b&&e.jsx("div",{className:"absolute -top-6 left-1/2 -translate-x-1/2 z-20",children:e.jsxs("div",{className:"relative",children:[e.jsx(St,{className:"w-8 h-8 text-yellow-400 drop-shadow-[0_0_10px_rgba(250,204,21,0.6)] animate-bounce",style:{animationDuration:"2s",filter:"drop-shadow(0 0 5px rgba(234, 179, 8, 0.5))"}}),e.jsx("div",{className:"absolute inset-0 bg-yellow-400/30 blur-xl rounded-full animate-pulse"})]})}),t.rank]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`font-semibold text-sm sm:text-base ${b?"text-yellow-500":"text-foreground"}`,children:t.name}),b&&e.jsx("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-yellow-500/20 text-yellow-600 font-bold uppercase tracking-wider border border-yellow-500/30",children:"L√≠der"})]}),e.jsx("div",{className:"text-xs text-muted-foreground mb-1.5",children:n.name}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"text-xs text-muted-foreground whitespace-nowrap",children:["XP: ",t.points,"/",l.minXP]}),e.jsx("div",{className:"flex-1 bg-muted/30 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-1000 ease-out ${b?"bg-gradient-to-r from-yellow-400 to-yellow-600 shadow-[0_0_10px_rgba(234,179,8,0.5)]":"bg-primary"}`,style:{width:`${w}%`}})})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center px-2 sm:px-4 border-l border-border/30 min-w-[90px]",children:[e.jsx("div",{className:"font-bold text-accent text-base sm:text-lg",children:t.posted||0}),e.jsxs("div",{className:"flex gap-2 mt-0.5",children:[e.jsxs("span",{className:"text-xs text-accent",title:"Postou",children:["‚úÖ",t.posted||0]}),e.jsxs("span",{className:"text-xs text-destructive",title:"N√£o Postou",children:["‚ùå",t.notPosted||0]})]}),e.jsx("div",{className:"text-[10px] text-muted-foreground uppercase tracking-wider mt-0.5 hidden sm:block",children:"Postagens"})]}),e.jsx("div",{className:"flex items-center gap-3 sm:gap-4",children:e.jsxs("div",{className:"text-right min-w-[80px]",children:[e.jsxs("div",{className:`font-bold text-lg sm:text-xl ${b?"text-yellow-500 drop-shadow-sm":"text-foreground"}`,children:[t.points," pts"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total acumulado"})]})})]})]},t.id)})})]})})})]})}),e.jsx("footer",{className:"glass-card text-center py-6 sm:py-8 text-xs sm:text-sm text-muted-foreground mt-8 sm:mt-12 border-t border-border/50",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-2 sm:gap-4",children:[e.jsx(Et,{to:"/support",className:"hover:text-primary transition-colors smooth-transition",children:"Condi√ß√µes e suporte"}),e.jsx("span",{className:"hidden sm:inline",children:"|"}),e.jsx(Et,{to:"/privacy",className:"hover:text-primary transition-colors smooth-transition",children:"Pol√≠tica de Privacidade"})]})})})]}),h&&x&&e.jsx(zr,{isOpen:h,onClose:()=>u(!1),affiliate:Y.find(t=>t.id===x.id)||x,calendarStatuses:Gt,classes:K})]})}function fa(){return e.jsx(dr,{children:e.jsx(Yr,{})})}export{fa as default};
