@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the design system. All colors, gradients, fonts, etc should be defined here. 
All colors MUST be HSL.
*/

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 240 10% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 240 10% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 240 10% 3.9%;
    --primary: 300 100% 42%;
    --primary-foreground: 0 0% 100%;
    --secondary: 340 100% 55%;
    --secondary-foreground: 0 0% 100%;
    --muted: 240 4.8% 95.9%;
    --muted-foreground: 240 3.8% 46.1%;
    --accent: 24 100% 51%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 5.9% 90%;
    --input: 240 5.9% 90%;
    --ring: 300 100% 42%;
    --radius: 1rem;
    
    /* Futuristic Neon Colors */
    --neon-magenta: 300 100% 42%;
    --neon-pink: 340 100% 55%;
    --neon-orange: 24 100% 51%;
    --neon-blue: 190 100% 50%;
    
    /* Glass Effect */
    --glass-bg: 0 0% 100%;
    --glass-opacity: 0.7;
    --glass-border: 0 0% 60%;
    
    /* Gradients */
    --gradient-primary: linear-gradient(135deg, hsl(240 20% 98%) 0%, hsl(300 30% 96%) 50%, hsl(240 10% 99%) 100%);
    --gradient-neon: linear-gradient(90deg, hsl(var(--neon-magenta)) 0%, hsl(var(--neon-pink)) 100%);
    --gradient-accent: linear-gradient(135deg, hsl(var(--neon-orange)) 0%, hsl(var(--neon-magenta)) 100%);
    
    /* Shadows */
    --shadow-neon: 0 0 20px hsl(var(--neon-magenta) / 0.3);
    --shadow-glow: 0 10px 40px hsl(var(--neon-magenta) / 0.2);
    --shadow-glass: 0 8px 32px 0 rgba(0, 0, 0, 0.1);

    /* Animations */
    --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .dark {
    --background: 240 6% 10%;
    --foreground: 0 0% 100%;
    --card: 240 8% 12%;
    --card-foreground: 0 0% 100%;
    --popover: 240 8% 12%;
    --popover-foreground: 0 0% 100%;
    --primary: 300 100% 42%;
    --primary-foreground: 0 0% 100%;
    --secondary: 340 100% 55%;
    --secondary-foreground: 0 0% 100%;
    --muted: 240 6% 15%;
    --muted-foreground: 0 0% 60%;
    --accent: 24 100% 51%;
    --accent-foreground: 0 0% 100%;
    --destructive: 0 72% 51%;
    --destructive-foreground: 0 0% 100%;
    --border: 240 8% 15%;
    --input: 240 8% 12%;
    --ring: 300 100% 42%;
    
    /* Glass Effect Dark */
    --glass-bg: 240 8% 12%;
    --glass-opacity: 0.3;
    --glass-border: 0 0% 100%;
    
    /* Gradients Dark */
    --gradient-primary: linear-gradient(135deg, hsl(240 6% 8%) 0%, hsl(240 6% 10%) 50%, hsl(240 6% 12%) 100%);
    --shadow-glass: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    background: var(--gradient-primary);
    background-attachment: fixed;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
  }
}

@layer utilities {
  /* Glass Card Effect */
  .glass-card {
    background: hsl(var(--glass-bg) / var(--glass-opacity));
    backdrop-filter: blur(20px);
    border: 1px solid hsl(var(--glass-border) / 0.2);
    box-shadow: var(--shadow-glass);
  }

  .glass-card-hover {
    @apply glass-card transition-all duration-300;
  }

  .glass-card-hover:hover {
    background: hsl(var(--glass-bg) / calc(var(--glass-opacity) + 0.1));
    border-color: hsl(var(--glass-border) / 0.4);
    transform: translateY(-2px);
    box-shadow: var(--shadow-glow);
  }

  /* Neon Effects */
  .neon-text {
    text-shadow: 0 0 10px hsl(var(--neon-magenta) / 0.5);
  }

  .neon-border {
    border: 1px solid hsl(var(--neon-magenta) / 0.5);
    box-shadow: 0 0 10px hsl(var(--neon-magenta) / 0.3);
  }

  /* Gradient Text */
  .gradient-text {
    background: var(--gradient-neon);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Hover Scale */
  .hover-scale {
    @apply transition-transform duration-300;
  }

  .hover-scale:hover {
    transform: scale(1.05);
  }

  /* Smooth Transitions */
  .smooth-transition {
    transition: var(--transition-smooth);
  }
}

@layer components {
  /* Futuristic Button Variants */
  .btn-neon {
    @apply px-6 py-3 rounded-full font-medium;
    background: var(--gradient-neon);
    color: hsl(var(--primary-foreground));
    box-shadow: var(--shadow-neon);
    transition: var(--transition-smooth);
  }

  .btn-neon:hover {
    box-shadow: var(--shadow-glow);
    transform: translateY(-2px);
  }

  .btn-glass {
    @apply glass-card px-6 py-3 rounded-full font-medium;
    color: hsl(var(--foreground));
  }

  .btn-glass:hover {
    background: hsl(var(--foreground) / 0.05);
    border-color: hsl(var(--neon-magenta) / 0.5);
  }
}

/* Driver.js Custom Modern Theme */
.driver-popover.driverjs-theme {
  background-color: hsl(var(--card)) !important;
  color: hsl(var(--foreground)) !important;
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
  box-shadow: var(--shadow-glow);
  font-family: 'Inter', system-ui, sans-serif;
  padding: 1.5rem;
  max-width: 400px;
  backdrop-filter: blur(20px);
}

.dark .driver-popover.driverjs-theme {
  background-color: hsl(var(--card) / 0.95) !important;
}

.driver-popover.driverjs-theme .driver-popover-title {
  font-size: 1.25rem !important;
  font-weight: 700 !important;
  margin-bottom: 0.75rem !important;
  background: var(--gradient-neon);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.driver-popover.driverjs-theme .driver-popover-description {
  font-size: 0.95rem !important;
  line-height: 1.6 !important;
  color: hsl(var(--muted-foreground)) !important;
  margin-bottom: 1.5rem !important;
}

.driver-popover.driverjs-theme button {
  border-radius: 0.75rem !important;
  padding: 0.5rem 1rem !important;
  font-size: 0.875rem !important;
  font-weight: 600 !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  cursor: pointer;
  text-shadow: none !important;
  outline: none !important;
}

.driver-popover.driverjs-theme .driver-popover-next-btn {
  background: var(--gradient-neon) !important;
  color: white !important;
  border: none !important;
}

.driver-popover.driverjs-theme .driver-popover-next-btn:hover {
  opacity: 0.9;
  transform: translateY(-2px);
  box-shadow: var(--shadow-neon);
}

.driver-popover.driverjs-theme .driver-popover-prev-btn,
.driver-popover.driverjs-theme .driver-popover-close-btn {
  background: transparent !important;
  color: hsl(var(--muted-foreground)) !important;
  border: 1px solid hsl(var(--border)) !important;
}

.driver-popover.driverjs-theme .driver-popover-prev-btn:hover,
.driver-popover.driverjs-theme .driver-popover-close-btn:hover {
  background: hsl(var(--muted)) !important;
  color: hsl(var(--foreground)) !important;
  border-color: hsl(var(--primary) / 0.5) !important;
}

.driver-popover.driverjs-theme .driver-popover-progress-text {
  color: hsl(var(--muted-foreground)) !important;
  font-size: 0.75rem !important;
  font-weight: 500 !important;
}

/* Driver.js Overlay and Highlight */
.driver-overlay path {
  fill: hsl(var(--background)) !important;
  opacity: 0.9 !important;
}

.driver-active-element {
  position: relative;
  z-index: 9999999 !important;
}

/* Enhanced Highlight Border */
.driver-active-element::after {
  content: '';
  position: absolute;
  inset: -6px;
  border-radius: calc(var(--radius) + 4px);
  border: 2px solid hsl(var(--accent));
  box-shadow: 
    0 0 20px hsl(var(--accent) / 0.5),
    inset 0 0 15px hsl(var(--accent) / 0.2);
  animation: pulse-border 2s infinite;
  pointer-events: none;
  z-index: 9999998;
}

/* Directional Arrow Indicator on Element */
.driver-active-element::before {
  content: '';
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  border-left: 10px solid transparent;
  border-right: 10px solid transparent;
  border-top: 10px solid hsl(var(--accent));
  filter: drop-shadow(0 0 5px hsl(var(--accent) / 0.8));
  animation: bounce-arrow 1.5s infinite;
  z-index: 9999999;
  pointer-events: none;
  opacity: 0; /* Hidden by default, shown if needed via JS or if we want it always */
  /* Keeping it hidden for now as popover has arrow, but user asked for indicators on element. 
     Let's show it only if we can determine position, or rely on the border. 
     Actually, let's make the border 'corners' style for a techy look. */
}

/* Let's try a Techy Corner Effect instead of just a box */
.driver-active-element::before {
  content: '';
  position: absolute;
  inset: -10px;
  border-radius: calc(var(--radius) + 6px);
  border: 2px dashed hsl(var(--primary) / 0.5);
  opacity: 0.5;
  pointer-events: none;
  z-index: 9999997;
  animation: spin-slow 10s linear infinite;
  display: none; /* Can clutter, keeping simple pulse for now */
}

@keyframes pulse-border {
  0% { 
    opacity: 0.6; 
    box-shadow: 0 0 0 0 hsl(var(--accent) / 0.6);
    transform: scale(1);
  }
  70% { 
    opacity: 1; 
    box-shadow: 0 0 30px 10px hsl(var(--accent) / 0);
    transform: scale(1.02);
  }
  100% { 
    opacity: 0.6; 
    box-shadow: 0 0 0 0 hsl(var(--accent) / 0);
    transform: scale(1);
  }
}

@keyframes bounce-arrow {
  0%, 100% { transform: translate(-50%, -5px); }
  50% { transform: translate(-50%, 5px); }
}

/* Popover Arrow Styling */
.driver-popover.driverjs-theme .driver-popover-arrow {
  border-width: 8px !important;
}

/* We need to target the specific side arrows to color them. 
   Driver.js uses border-color to shape the arrow. 
   The visible triangle is the side border. */

/* Arrow on Bottom (Popover on Top) */
.driver-popover.driverjs-theme .driver-popover-arrow-side-bottom {
  border-top-color: hsl(var(--card)) !important;
  border-bottom-color: transparent !important;
  border-left-color: transparent !important;
  border-right-color: transparent !important;
}

/* Arrow on Top (Popover on Bottom) */
.driver-popover.driverjs-theme .driver-popover-arrow-side-top {
  border-bottom-color: hsl(var(--card)) !important;
  border-top-color: transparent !important;
  border-left-color: transparent !important;
  border-right-color: transparent !important;
}

/* Arrow on Right (Popover on Left) */
.driver-popover.driverjs-theme .driver-popover-arrow-side-right {
  border-left-color: hsl(var(--card)) !important;
  border-right-color: transparent !important;
  border-top-color: transparent !important;
  border-bottom-color: transparent !important;
}

/* Arrow on Left (Popover on Right) */
.driver-popover.driverjs-theme .driver-popover-arrow-side-left {
  border-right-color: hsl(var(--card)) !important;
  border-left-color: transparent !important;
  border-top-color: transparent !important;
  border-bottom-color: transparent !important;
}

/* Add a glow to the arrow to match popover */
.driver-popover.driverjs-theme .driver-popover-arrow {
  filter: drop-shadow(0 0 5px hsl(var(--neon-magenta) / 0.3));
}


/* Mobile adjustments for Driver.js */
@media (max-width: 640px) {
  .driver-popover.driverjs-theme {
    width: 90vw !important;
    max-width: none !important;
    left: 5vw !important;
    padding: 1rem !important;
  }
  
  .driver-popover.driverjs-theme .driver-popover-title {
    font-size: 1.1rem !important;
  }
  
  .driver-popover.driverjs-theme .driver-popover-description {
    font-size: 0.875rem !important;
    margin-bottom: 1rem !important;
  }
}
