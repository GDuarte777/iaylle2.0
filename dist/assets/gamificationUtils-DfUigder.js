import{c as w}from"./index-D9dO6jDR.js";const D=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],v=w("award",D);function b(y,m,h){const c={},g=`${y}:`,f=Object.entries(h).filter(([t])=>typeof t=="string"&&t.startsWith(g)).map(([t,o])=>{const a=String(t).split(":")[1]||"",s=new Date(a);return{dateStr:a,status:o,date:s}}).filter(t=>!Number.isNaN(t.date.getTime())).sort((t,o)=>t.date.getTime()-o.date.getTime());if(f.length===0)return c;for(const t of m){const o=new Set(t.classKeys);if((t.streakDays||0)>0){const a=t.streakDays;let s=0,d=0,e=null;const i=f.filter(n=>o.has(n.status));for(const n of i)e?s=(n.date.getTime()-e.getTime())/864e5===1?s+1:1:s=1,e=n.date,s>d&&(d=s);d>=a&&(c[t.id]=!0);continue}if((t.countThreshold||0)>0){const a=t.countThreshold,s=t.timeWindow||"total";if(s==="month"){const e={};for(const i of f){if(!o.has(i.status))continue;const n=i.dateStr.slice(0,7);n&&(e[n]=(e[n]||0)+1)}for(const[i,n]of Object.entries(e))n>=a&&(c[`${t.id}@${i}`]=!0);continue}if(s==="week"){const e=new Date,n=(e.getDay()+6)%7,r=new Date(e);r.setHours(0,0,0,0),r.setDate(e.getDate()-n);const u=new Date(r);u.setHours(23,59,59,999),u.setDate(r.getDate()+6),f.filter(l=>o.has(l.status)&&l.date>=r&&l.date<=u).length>=a&&(c[t.id]=!0);continue}f.filter(e=>o.has(e.status)).length>=a&&(c[t.id]=!0)}}return c}export{v as A,b as c};
