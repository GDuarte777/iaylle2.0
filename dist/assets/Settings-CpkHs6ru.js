import{c as re,j as f,o as e,q as U,Y as Pe,E as ye,B as Se,J as Ce,Z as _e,I as N,af as J,a9 as Ee,aa as Y,ag as Ae,N as _,G as D,H as x}from"./index-D9dO6jDR.js";import{G as L}from"./GlassCard-3LL1uNH4.js";import{I as M}from"./input-B-CVJ1EK.js";import{L as A}from"./label-oZkRqp9j.js";import{T as ke}from"./textarea-CaGXNRBe.js";import{c as Fe}from"./index-CurXoWR1.js";import{S as qe}from"./switch-CpBR6YKs.js";import{L as O}from"./loader-circle-C9YKQ5PS.js";import{T as Me}from"./trash-2-C6TvX7gl.js";import{E as B}from"./eye-off-rkGt8C-x.js";import"./index-B6rWjmp5.js";const $e=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Le=re("bell",$e);const Re=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Oe=re("camera",Re);function Ie(s,a=[]){let d=[];function t(u,c){const l=f.createContext(c);l.displayName=u+"Context";const h=d.length;d=[...d,c];const p=g=>{const{scope:k,children:F,...b}=g,v=k?.[s]?.[h]||l,E=f.useMemo(()=>b,Object.values(b));return e.jsx(v.Provider,{value:E,children:F})};p.displayName=u+"Provider";function S(g,k){const F=k?.[s]?.[h]||l,b=f.useContext(F);if(b)return b;if(c!==void 0)return c;throw new Error(`\`${g}\` must be used within \`${u}\``)}return[p,S]}const i=()=>{const u=d.map(c=>f.createContext(c));return function(l){const h=l?.[s]||u;return f.useMemo(()=>({[`__scope${s}`]:{...l,[s]:h}}),[l,h])}};return i.scopeName=s,[t,Te(i,...a)]}function Te(...s){const a=s[0];if(s.length===1)return a;const d=()=>{const t=s.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(u){const c=t.reduce((l,{useScope:h,scopeName:p})=>{const g=h(u)[`__scope${p}`];return{...l,...g}},{});return f.useMemo(()=>({[`__scope${a.scopeName}`]:c}),[c])}};return d.scopeName=a.scopeName,d}var De=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],se=De.reduce((s,a)=>{const d=Fe(`Primitive.${a}`),t=f.forwardRef((i,u)=>{const{asChild:c,...l}=i,h=c?d:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(h,{...l,ref:u})});return t.displayName=`Primitive.${a}`,{...s,[a]:t}},{}),z="Progress",V=100,[Be]=Ie(z),[Ue,ze]=Be(z),ae=f.forwardRef((s,a)=>{const{__scopeProgress:d,value:t=null,max:i,getValueLabel:u=Ve,...c}=s;(i||i===0)&&!K(i)&&console.error(Ge(`${i}`,"Progress"));const l=K(i)?i:V;t!==null&&!Q(t,l)&&console.error(He(`${t}`,"Progress"));const h=Q(t,l)?t:null,p=I(h)?u(h,l):void 0;return e.jsx(Ue,{scope:d,value:h,max:l,children:e.jsx(se.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":I(h)?h:void 0,"aria-valuetext":p,role:"progressbar","data-state":ne(h,l),"data-value":h??void 0,"data-max":l,...c,ref:a})})});ae.displayName=z;var te="ProgressIndicator",oe=f.forwardRef((s,a)=>{const{__scopeProgress:d,...t}=s,i=ze(te,d);return e.jsx(se.div,{"data-state":ne(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...t,ref:a})});oe.displayName=te;function Ve(s,a){return`${Math.round(s/a*100)}%`}function ne(s,a){return s==null?"indeterminate":s===a?"complete":"loading"}function I(s){return typeof s=="number"}function K(s){return I(s)&&!isNaN(s)&&s>0}function Q(s,a){return I(s)&&!isNaN(s)&&s<=a&&s>=0}function Ge(s,a){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${V}\`.`}function He(s,a){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${V} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ie=ae,We=oe;const le=f.forwardRef(({className:s,value:a,indicatorClassName:d,...t},i)=>e.jsx(ie,{ref:i,className:U("relative h-4 w-full overflow-hidden rounded-full bg-secondary",s),...t,children:e.jsx(We,{className:U("h-full w-full flex-1 bg-primary transition-all",d),style:{transform:`translateX(-${100-(a||0)}%)`}})}));le.displayName=ie.displayName;const ce=8;function Ze(s){return s<=0?0:s===1?1:s===2?2:s===3?3:4}function Xe(s){return s===0?"muito_fraca":s===1?"fraca":s===2?"media":s===3?"forte":"muito_forte"}function Je(s){switch(s){case"muito_fraca":return"Muito fraca";case"fraca":return"Fraca";case"media":return"Média";case"forte":return"Forte";case"muito_forte":return"Muito forte"}}function de(s,a=ce){const d=[{id:"min_length",label:`Pelo menos ${a} caracteres`,passed:s.length>=a,required:!0},{id:"lower",label:"1 letra minúscula",passed:/[a-z]/.test(s),required:!0},{id:"upper",label:"1 letra maiúscula",passed:/[A-Z]/.test(s),required:!0},{id:"number",label:"1 número",passed:/\d/.test(s),required:!0},{id:"symbol",label:"1 caractere especial (recomendado)",passed:/[^A-Za-z0-9]/.test(s),required:!1}],i=d.filter(l=>l.required).filter(l=>l.passed).length,u=Ze(i),c=Xe(u);return{score:u,level:c,label:Je(c),checks:d,minLength:a}}function ee(s){const a={},d=s.minLength??ce;return s.currentPassword.trim()||(a.currentPassword="Informe sua senha atual."),s.newPassword?de(s.newPassword,d).checks.filter(u=>u.required).every(u=>u.passed)||(a.newPassword="A nova senha não atende aos requisitos mínimos."):a.newPassword="Informe a nova senha.",s.confirmPassword?s.newPassword!==s.confirmPassword&&(a.confirmPassword="A confirmação não corresponde à nova senha."):a.confirmPassword="Confirme a nova senha.",a}async function Ye(s){const{client:a,email:d,currentPassword:t,newPassword:i}=s,{error:u}=await a.auth.signInWithPassword({email:d,password:t});if(u)return{success:!1,error:u.message||"Senha atual incorreta."};const{error:c}=await a.auth.updateUser({password:i});if(c)return{success:!1,error:c.message||"Não foi possível alterar a senha."};let l=!1;{const{error:h}=await a.functions.invoke("auth-password-changed-notify",{body:{}});l=!h}if(s.signOutEverywhere)try{await a.auth.signOut({scope:"global"})}catch{await a.auth.signOut()}return{success:!0,notified:l}}function Ke(){const s=ye(),[a,d]=f.useState("profile"),{user:t,initialize:i,logout:u}=Se(),{subscription:c,payments:l,loading:h}=Ce(),p=_e(),[S,g]=f.useState(!1),[k,F]=f.useState(!1),b=f.useRef(null),[v,E]=f.useState({full_name:"",email:"",company:"",bio:""}),[m,$]=f.useState({currentPassword:"",newPassword:"",confirmPassword:"",signOutEverywhere:!0}),[w,P]=f.useState({}),[y,R]=f.useState({current:!1,next:!1,confirm:!1});f.useEffect(()=>{t&&(E({full_name:t.name||"",email:t.email||"",company:"",bio:""}),ue())},[t]);const ue=async()=>{if(t)try{const{data:r,error:o}=await N.from("profiles").select("*").eq("id",t.id).single();if(o)throw o;r&&E(n=>({...n,full_name:r.full_name||n.full_name,company:r.company||"",bio:r.bio||""}))}catch(r){console.error("Error fetching profile details:",r)}},me=r=>r.includes("/storage/v1/object/")&&r.includes("/avatars/"),G=r=>{try{if(!me(r))return null;const o=new URL(r),n=o.pathname.indexOf("/avatars/");return n===-1?null:decodeURIComponent(o.pathname.slice(n+9))}catch{return null}},fe=async r=>{const o=r.target.files?.[0];if(!(!o||!t)){if(p&&!p.isPageToolsEnabled()){p.notifyToolBlocked();return}if(!o.type.startsWith("image/")){x.error("Por favor, selecione uma imagem.");return}if(o.size>5*1024*1024){x.error("A imagem deve ter no máximo 5MB.");return}try{g(!0);const n=t.avatar?G(t.avatar):null,j=o.name.split(".").pop()||"jpg",q=`${t.id}/${Date.now()}.${j}`,{error:Z}=await N.storage.from("avatars").upload(q,o,{upsert:!0});if(Z)throw Z;const{data:je}=N.storage.from("avatars").getPublicUrl(q),Ne=je.publicUrl,{error:X}=await N.rpc("set_own_profile_avatar",{p_avatar_url:Ne});if(X)throw X;n&&n!==q&&await N.storage.from("avatars").remove([n]),await i(),x.success("Foto de perfil atualizada!")}catch(n){const j=n instanceof Error?n.message:String(n);x.error(`Erro ao atualizar foto: ${j}`)}finally{g(!1),b.current&&(b.current.value="")}}},he=async()=>{if(t?.avatar){if(p&&!p.isPageToolsEnabled()){p.notifyToolBlocked();return}try{g(!0);const r=G(t.avatar),{error:o}=await N.rpc("set_own_profile_avatar",{p_avatar_url:null});if(o)throw o;r&&await N.storage.from("avatars").remove([r]),await i(),x.success("Foto de perfil removida!")}catch(r){const o=r instanceof Error?r.message:String(r);x.error(`Erro ao remover foto: ${o}`)}finally{g(!1)}}},pe=async()=>{if(t){if(p&&!p.isPageToolsEnabled()){p.notifyToolBlocked();return}g(!0);try{const{error:r}=await N.rpc("update_own_profile_details",{p_full_name:v.full_name,p_company:v.company,p_bio:v.bio});if(r)throw r;await i(),x.success("Perfil atualizado com sucesso!")}catch(r){console.error("Error updating profile:",r),x.error("Erro ao atualizar perfil")}finally{g(!1)}}},H=async()=>{try{const o=`${window.location.origin}/dashboard/settings`,{data:n,error:j}=await N.functions.invoke("stripe-portal",{body:{returnUrl:o}});if(j)throw j;const q=n?.url;if(!q)throw new Error("URL do portal não retornada");window.location.href=q}catch(r){console.error("Error opening Stripe portal:",r),x.error("Erro ao abrir portal de faturamento")}},xe=async()=>{await u(),s("/login")},C=f.useMemo(()=>de(m.newPassword),[m.newPassword]),W=f.useMemo(()=>{const r=C.score/4;return Math.round(r*100)},[C.score]),we=f.useMemo(()=>C.score<=1?"bg-red-500":C.score===2?"bg-yellow-500":C.score===3?"bg-neon-blue":"bg-green-500",[C.score]),T=f.useMemo(()=>m.confirmPassword?m.newPassword!==m.confirmPassword:!1,[m.confirmPassword,m.newPassword]),ge=f.useMemo(()=>{const r=ee({currentPassword:m.currentPassword,newPassword:m.newPassword,confirmPassword:m.confirmPassword});return!r.currentPassword&&!r.newPassword&&!r.confirmPassword},[m.confirmPassword,m.currentPassword,m.newPassword]),ve=async()=>{if(!t?.email){P({form:"Você precisa estar autenticado para alterar a senha."}),x.error("Você precisa estar autenticado para alterar a senha.");return}if(p&&!p.isPageToolsEnabled()){p.notifyToolBlocked();return}const r=ee({currentPassword:m.currentPassword,newPassword:m.newPassword,confirmPassword:m.confirmPassword});if(r.currentPassword||r.newPassword||r.confirmPassword){P({...r,form:"Corrija os campos antes de continuar."}),x.error("Revise os campos de senha.");return}F(!0),P({});try{const o=await Ye({client:N,email:t.email,currentPassword:m.currentPassword,newPassword:m.newPassword,notify:!0,signOutEverywhere:m.signOutEverywhere});if(o.success===!1){const n=o.error||"Não foi possível alterar a senha.",j=n.toLowerCase();j.includes("invalid login")||j.includes("credenciais")||j.includes("senha")?(P({currentPassword:"Senha atual incorreta."}),x.error("Senha atual incorreta.")):(P({form:n}),x.error(n));return}if(x.success("Senha alterada com sucesso."),o.notified||x.warning("Senha alterada. Não foi possível enviar o e-mail de confirmação."),$(n=>({...n,currentPassword:"",newPassword:"",confirmPassword:""})),R({current:!1,next:!1,confirm:!1}),m.signOutEverywhere){await u(),s("/login");return}await i()}catch(o){const n=o instanceof Error?o.message:"Erro ao alterar senha";P({form:"Erro ao alterar senha. Tente novamente."}),x.error(n)}finally{F(!1)}},be=[{id:"profile",label:"Perfil",icon:J},{id:"notifications",label:"Notificações",icon:Le},{id:"security",label:"Segurança",icon:Ee},{id:"billing",label:"Faturamento",icon:Y}];return e.jsxs("div",{className:"p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-4xl font-bold mb-2 flex items-center gap-3",children:[e.jsx(J,{className:"w-10 h-10 text-neon-blue animate-glow"}),"Perfil"]}),e.jsx("p",{className:"text-muted-foreground",children:"Gerencie as configurações da sua conta e da plataforma"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx(L,{className:"p-4",children:e.jsxs("nav",{className:"space-y-1",children:[be.map(r=>e.jsxs("button",{onClick:()=>d(r.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${a===r.id?"bg-gradient-to-r from-neon-blue/20 to-neon-violet/20 border border-neon-blue/30 text-foreground font-medium":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:[e.jsx(r.icon,{className:"w-5 h-5"}),e.jsx("span",{children:r.label})]},r.id)),e.jsx("div",{className:"mt-6 pt-6 border-t border-white/10",children:e.jsxs("button",{onClick:xe,className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all text-red-500 hover:bg-red-500/10 hover:text-red-400 font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 ring-offset-background",children:[e.jsx(Ae,{className:"w-5 h-5"}),e.jsx("span",{children:"Sair da Conta"})]})})]})})}),e.jsxs("div",{className:"lg:col-span-3",children:[a==="profile"&&e.jsxs(L,{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Informações do Perfil"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-neon-blue to-neon-violet flex items-center justify-center font-bold text-3xl overflow-hidden relative",children:t?.avatar?e.jsx("img",{src:t.avatar,alt:t.name,className:"w-full h-full object-cover"}):e.jsx("span",{children:t?.name?.charAt(0)||"U"})}),e.jsxs("div",{children:[e.jsx("input",{type:"file",ref:b,className:"hidden",accept:"image/*",onChange:fe}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(_,{variant:"glass",onClick:()=>b.current?.click(),disabled:S,children:[S?e.jsx(O,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Alterar Foto"]}),t?.avatar&&t.avatar.includes("avatars")&&e.jsx(_,{variant:"glass",className:"text-red-400 hover:text-red-300 border-red-500/20 hover:bg-red-500/10",onClick:he,disabled:S,children:e.jsx(Me,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Foto de perfil vinculada à sua conta."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"name",children:"Nome Completo"}),e.jsx(M,{id:"name",value:v.full_name,onChange:r=>E({...v,full_name:r.target.value}),className:"glass-card border-white/10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"email",children:"Email"}),e.jsx(M,{id:"email",type:"email",value:v.email,disabled:!0,className:"glass-card border-white/10 opacity-60 cursor-not-allowed"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"company",children:"Nome da Empresa"}),e.jsx(M,{id:"company",value:v.company,onChange:r=>E({...v,company:r.target.value}),placeholder:"Não informado",className:"glass-card border-white/10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"bio",children:"Sobre"}),e.jsx(ke,{id:"bio",value:v.bio,onChange:r=>E({...v,bio:r.target.value}),placeholder:"Conte um pouco sobre você...",className:"glass-card border-white/10 min-h-[100px]"})]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs(_,{variant:"neon",onClick:pe,disabled:S,children:[S?e.jsx(O,{className:"w-4 h-4 animate-spin mr-2"}):null,"Salvar Alterações"]})})]})]}),a==="notifications"&&e.jsxs(L,{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Preferências de Notificação"}),e.jsx("div",{className:"space-y-6",children:[{label:"Novas conquistas desbloqueadas",description:"Receba notificações quando alguém desbloquear uma conquista"},{label:"Missões completadas",description:"Notificações sobre missões concluídas pela equipe"},{label:"Novos membros",description:"Avisos quando novos membros entrarem na equipe"},{label:"Relatórios semanais",description:"Resumo semanal do desempenho da equipe"},{label:"Avisos de sistema",description:"Atualizações e manutenções programadas"}].map((r,o)=>e.jsxs("div",{className:"flex items-start justify-between p-4 rounded-xl bg-white/5",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium mb-1",children:r.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]}),e.jsx("button",{className:"w-12 h-6 rounded-full bg-neon-blue relative ml-4",children:e.jsx("div",{className:"w-5 h-5 rounded-full bg-white absolute right-0.5 top-0.5"})})]},o))})]}),a==="security"&&e.jsxs(L,{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Segurança"}),e.jsxs("div",{className:"space-y-6",children:[w.form&&e.jsx("div",{role:"alert","aria-live":"polite",className:"rounded-xl border border-red-500/30 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:w.form}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"current-password",children:"Senha Atual"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{id:"current-password",type:y.current?"text":"password",value:m.currentPassword,onChange:r=>{const o=r.target.value;$(n=>({...n,currentPassword:o})),P(n=>({...n,currentPassword:void 0,form:void 0}))},"aria-invalid":!!w.currentPassword,"aria-describedby":w.currentPassword?"current-password-error":void 0,className:"glass-card border-white/10 pr-12",autoComplete:"current-password",required:!0}),e.jsx("button",{type:"button",onClick:()=>R(r=>({...r,current:!r.current})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":y.current?"Ocultar senha atual":"Mostrar senha atual",children:y.current?e.jsx(B,{className:"w-5 h-5"}):e.jsx(D,{className:"w-5 h-5"})})]}),w.currentPassword&&e.jsx("p",{id:"current-password-error",role:"alert",className:"text-sm text-red-300",children:w.currentPassword})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"new-password",children:"Nova Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{id:"new-password",type:y.next?"text":"password",value:m.newPassword,onChange:r=>{const o=r.target.value;$(n=>({...n,newPassword:o})),P(n=>({...n,newPassword:void 0,form:void 0}))},"aria-invalid":!!w.newPassword,"aria-describedby":w.newPassword?"new-password-error new-password-strength":"new-password-strength",className:"glass-card border-white/10 pr-12",autoComplete:"new-password",required:!0,minLength:8}),e.jsx("button",{type:"button",onClick:()=>R(r=>({...r,next:!r.next})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":y.next?"Ocultar nova senha":"Mostrar nova senha",children:y.next?e.jsx(B,{className:"w-5 h-5"}):e.jsx(D,{className:"w-5 h-5"})})]}),e.jsxs("div",{id:"new-password-strength",className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs("p",{className:"text-sm text-muted-foreground","aria-live":"polite",children:["Força: ",e.jsx("span",{className:"text-foreground",children:C.label})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[W,"%"]})]}),e.jsx(le,{value:W,indicatorClassName:we,"aria-label":"Força da senha"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:C.checks.map(r=>e.jsx("p",{className:U("text-sm",r.passed?"text-green-300":r.required?"text-red-300":"text-muted-foreground"),children:r.label},r.id))})]}),w.newPassword&&e.jsx("p",{id:"new-password-error",role:"alert",className:"text-sm text-red-300",children:w.newPassword})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(A,{htmlFor:"confirm-password",children:"Confirmar Nova Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{id:"confirm-password",type:y.confirm?"text":"password",value:m.confirmPassword,onChange:r=>{const o=r.target.value;$(n=>({...n,confirmPassword:o})),P(n=>({...n,confirmPassword:void 0,form:void 0}))},"aria-invalid":!!w.confirmPassword||T,"aria-describedby":w.confirmPassword?"confirm-password-error":T?"confirm-password-mismatch":void 0,className:"glass-card border-white/10 pr-12",autoComplete:"new-password",required:!0}),e.jsx("button",{type:"button",onClick:()=>R(r=>({...r,confirm:!r.confirm})),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground transition-colors","aria-label":y.confirm?"Ocultar confirmação":"Mostrar confirmação",children:y.confirm?e.jsx(B,{className:"w-5 h-5"}):e.jsx(D,{className:"w-5 h-5"})})]}),T&&e.jsx("p",{id:"confirm-password-mismatch",role:"alert",className:"text-sm text-red-300",children:"A confirmação não corresponde à nova senha."}),w.confirmPassword&&e.jsx("p",{id:"confirm-password-error",role:"alert",className:"text-sm text-red-300",children:w.confirmPassword})]}),e.jsxs("div",{className:"flex items-start justify-between gap-4 rounded-xl bg-white/5 p-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Encerrar sessões em outros dispositivos"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Recomendado: você fará login novamente após a troca."})]}),e.jsx(qe,{checked:m.signOutEverywhere,onCheckedChange:r=>$(o=>({...o,signOutEverywhere:r})),"aria-label":"Encerrar outras sessões"})]}),e.jsxs(_,{variant:"neon",onClick:ve,disabled:k||!t||!ge,children:[k?e.jsx(O,{className:"w-4 h-4 animate-spin mr-2"}):null,"Alterar Senha"]}),e.jsxs("div",{className:"pt-6 border-t border-white/10",children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Autenticação de Dois Fatores"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Adicione uma camada extra de segurança à sua conta"}),e.jsx(_,{variant:"glass",children:"Ativar 2FA"})]})]})]}),a==="billing"&&e.jsxs(L,{className:"p-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Faturamento e Assinatura"}),h?e.jsx("div",{className:"flex justify-center p-8",children:e.jsx(O,{className:"w-8 h-8 animate-spin text-neon-blue"})}):c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-xl bg-gradient-to-br from-neon-blue/10 to-neon-violet/10 border border-neon-blue/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:c.plan.name}),e.jsx("p",{className:"text-muted-foreground",children:c.plan.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-3xl font-bold text-neon-blue",children:(c.plan.price_cents/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["/",c.plan.interval==="monthly"?"mês":"ano"]})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Próxima cobrança em ",new Date(c.current_period_end).toLocaleDateString("pt-BR")]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(_,{variant:"glass",onClick:H,children:"Alterar Plano"}),e.jsx(_,{variant:"outline",className:"text-destructive",onClick:H,children:"Cancelar Assinatura"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-4",children:"Histórico de Pagamentos"}),l.length>0?e.jsx("div",{className:"space-y-2",children:l.map(r=>e.jsxs("div",{className:"p-4 rounded-xl bg-white/5 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:new Date(r.paid_at).toLocaleDateString("pt-BR")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:c.plan.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:(r.amount_cents/100).toLocaleString("pt-BR",{style:"currency",currency:r.currency})}),e.jsx("p",{className:"text-sm text-neon-turquoise capitalize",children:r.status==="paid"?"Pago":r.status})]})]},r.id))}):e.jsx("p",{className:"text-muted-foreground text-sm",children:"Nenhum pagamento registrado."})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-16 h-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-bold mb-2",children:"Plano Gratuito"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Você está usando o plano gratuito. Faça upgrade para desbloquear mais recursos."}),e.jsx(_,{variant:"neon",onClick:()=>window.location.href="/dashboard/settings",children:"Ver Planos Disponíveis"})]})]})]})]})]})}function dr(){return e.jsx(Pe,{children:e.jsx(Ke,{})})}export{dr as default};
