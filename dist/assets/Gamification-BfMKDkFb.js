import{c as xe,j as n,o as e,Q as ie,ae as ue,I as X,O as ge,B as he,$ as pe,Y as K,T as be,a0 as fe,N as L,H as Q,a1 as H}from"./index-D9dO6jDR.js";import{G as I}from"./GlassCard-3LL1uNH4.js";import{B as oe}from"./button-BiTOCxHO.js";import{P as ve,a as je,b as Ne}from"./popover-CgO1idC9.js";import{T as we,a as ye,b as Y,c as Z}from"./tabs-BzIc16-c.js";import{I as ke}from"./input-B-CVJ1EK.js";import{L as Ce}from"./label-oZkRqp9j.js";import{I as Pe}from"./image-DWvxx45K.js";import{U as Se}from"./upload-DgRyxnyV.js";import{D as M,a as O,c as J,b as R,d as ee}from"./dialog-CTG_fKa3.js";import{S as se,a as ae,b as re,c as te,d as v}from"./select-CW8OCjh3.js";import{c as Ae,A as De}from"./gamificationUtils-DfUigder.js";import{L as Le}from"./lock-DeI8OxDo.js";import{Z as Ee}from"./zap-BhSU9ATp.js";import{P as W}from"./plus-B0uAgXLJ.js";import{S as G}from"./square-pen-kyfKBXTz.js";import{T as U}from"./trash-2-C6TvX7gl.js";import{C as B}from"./check-DPcULkwW.js";import"./index-CurXoWR1.js";import"./index-CQKvY29V.js";import"./index-DwWHu9OX.js";import"./index-CfA0gxda.js";import"./index-CREuF23G.js";import"./index-BdQq_4o_.js";import"./index-B6rWjmp5.js";import"./chevron-down-CqRsxq5z.js";const _e=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],Xe=xe("smile",_e),qe=["üèÜ","ü•á","ü•à","ü•â","üèÖ","üéñÔ∏è","üëë","üíé","üöÄ","üî•","‚ö°","üåü","‚≠ê","üéØ","üé®","üéÆ","üé≤","üé∞","üß©","üé≥","üé§","üéß","üé¨","üé≠","üéÅ","üéà","üéâ","üéä","üí∞","üí∏","üíµ","üí≥","üõ°Ô∏è","‚öîÔ∏è","üí£","üß®","üî®","üîß","‚öôÔ∏è","‚öñÔ∏è","üí°","üî¶","üß¨","üî¨","üî≠","üì°","üåç","üåà"];function le({value:l,onChange:j}){const[P,p]=n.useState(!1),[b,N]=n.useState(""),E=m=>{const q=m.target.files?.[0];if(q){const d=new FileReader;d.onloadend=()=>{const f=d.result;j(f),p(!1)},d.readAsDataURL(q)}};return e.jsxs(ve,{open:P,onOpenChange:p,children:[e.jsx(je,{asChild:!0,children:e.jsx("button",{className:"w-16 h-16 rounded-2xl bg-white/5 hover:bg-white/10 border border-white/10 flex items-center justify-center text-3xl transition-all hover:scale-105 active:scale-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 ring-offset-background",children:l.startsWith("data:")||l.startsWith("http")?e.jsx("img",{src:l,alt:"Icon",className:"w-full h-full object-cover rounded-2xl"}):l||"üèÜ"})}),e.jsx(Ne,{className:"w-80 p-0 bg-background/95 backdrop-blur-xl border-white/10",children:e.jsxs(we,{defaultValue:"icons",className:"w-full",children:[e.jsxs(ye,{className:"w-full grid grid-cols-2 rounded-none bg-muted/50",children:[e.jsxs(Y,{value:"icons",className:"data-[state=active]:bg-background/80",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"√çcones"]}),e.jsxs(Y,{value:"image",className:"data-[state=active]:bg-background/80",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Imagem"]})]}),e.jsx(Z,{value:"icons",className:"p-4",children:e.jsx("div",{className:"grid grid-cols-6 gap-2",children:qe.map(m=>e.jsx("button",{onClick:()=>{j(m),p(!1)},className:`aspect-square flex items-center justify-center text-xl rounded-lg hover:bg-primary/20 transition-colors ${l===m?"bg-primary/20 ring-1 ring-primary":""}`,children:m},m))})}),e.jsxs(Z,{value:"image",className:"p-4 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Ce,{children:"URL da Imagem"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ke,{placeholder:"https://...",value:b,onChange:m=>N(m.target.value),className:"bg-white/5 border-white/10"}),e.jsx(oe,{size:"sm",onClick:()=>{b&&(j(b),p(!1))},children:"Ok"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-white/10"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Ou fa√ßa upload"})})]}),e.jsx("div",{className:"flex items-center justify-center w-full",children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed border-white/10 rounded-lg cursor-pointer hover:bg-white/5 transition-colors",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[e.jsx(Se,{className:"w-8 h-8 mb-3 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clique para selecionar"})]}),e.jsx("input",{type:"file",className:"hidden",accept:"image/*",onChange:E})]})})]})]})})]})}function Te(l){const{classes:j,levels:P,achievements:p}=ie(),[b,N]=n.useState({}),[E,m]=n.useState({});return n.useEffect(()=>{if(!l){N({}),m({});return}if(!ue){N({}),m({});return}let d=!1;const f=async()=>{const k=await ge();if(d||!k){N({}),m({});return}const{data:_,error:x}=await X.from("affiliates").select("id").eq("id",l).eq("owner_user_id",k.id).maybeSingle();if(d||x||!_?.id){N({}),m({});return}const{data:A}=await X.from("affiliate_metrics").select("date, status").eq("affiliate_id",l),r={};A?.forEach(u=>{r[`${l}:${u.date}`]=u.status}),d||N(r);const{data:w}=await X.from("affiliate_achievements").select("achievement_id, period_tag").eq("affiliate_id",l),g={};w?.forEach(u=>{const D=u.period_tag?`${u.achievement_id}@${u.period_tag}`:u.achievement_id;g[D]=!0}),d||m(g)};f();const S=X.channel("gamification_changes").on("postgres_changes",{event:"*",schema:"public",table:"affiliate_metrics",filter:`affiliate_id=eq.${l}`},()=>f()).on("postgres_changes",{event:"*",schema:"public",table:"affiliate_achievements",filter:`affiliate_id=eq.${l}`},()=>f()).subscribe(k=>{d||k==="SUBSCRIBED"&&f()});return()=>{d=!0,X.removeChannel(S)}},[l]),n.useMemo(()=>{if(!l)return{totalXP:0,statusXP:0,achievementXP:0,currentLevel:null,nextLevel:null,progressPercent:0,xpForNextLevel:0,xpInCurrentLevel:0,calendarStatuses:{},awardedAchievements:{}};let d=0;const f=`${l}:`;Object.entries(b).forEach(([a,t])=>{if(a.startsWith(f)){const i=j.find(h=>h.key===t);i&&(d+=i.points)}});let S=0;const k=Ae(l,p,b),_={...E,...k};p.forEach(a=>{Object.keys(_).forEach(t=>{(t===a.id||t.startsWith(`${a.id}@`))&&(S+=a.xp)})});const x=d+S,A=[...P].sort((a,t)=>t.minXP-a.minXP),r=A.find(a=>x>=a.minXP)||A[A.length-1]||null,g=[...P].sort((a,t)=>a.minXP-t.minXP).find(a=>a.minXP>x)||null;let u=0,D=0,T=0;if(r&&g){const a=g.minXP-r.minXP,t=x-r.minXP;u=Math.min(100,Math.max(0,t/a*100)),D=g.minXP-x,T=t}else if(r&&!g)u=100,D=0,T=x-r.minXP;else if(!r&&g){const a=g.minXP;u=Math.min(100,Math.max(0,x/a*100)),D=g.minXP-x,T=x}return{totalXP:x,statusXP:d,achievementXP:S,currentLevel:r,nextLevel:g,progressPercent:u,xpForNextLevel:D,xpInCurrentLevel:T,calendarStatuses:b,awardedAchievements:_}},[l,j,P,p,b,E])}function bs(){const{user:l}=he(),{classes:j,achievements:P,levels:p,addClass:b,updateClass:N,removeClass:E,setPoints:m,addAchievement:q,updateAchievement:d,removeAchievement:f,addLevel:S,updateLevel:k,removeLevel:_,initializeFromSupabase:x}=ie(),{startGamificationTutorial:A}=pe(),[r,w]=n.useState({label:"",description:"",points:0,bg:"#ffffff",type:"neutral"}),[g,u]=n.useState({title:"",description:"",xp:0,classKeys:[],streakDays:0,countThreshold:0,timeWindow:"month",icon:""}),[D,T]=n.useState(!1),[a,t]=n.useState(null),[i,h]=n.useState(null),[o,y]=n.useState(null),[ne,$]=n.useState(!1),[$e,de]=n.useState([]),[V,ce]=n.useState("");n.useEffect(()=>{x()},[x]),n.useEffect(()=>{if(!l)return;async function s(){const{data:c}=await X.from("affiliates").select("id, name").eq("owner_user_id",l.id).order("name");c&&(de(c),c.length>0&&!V&&ce(c[0].id))}s()},[l]);const{currentLevel:Fe,nextLevel:Ie,totalXP:Me,progressPercent:Oe,xpInCurrentLevel:Re,xpForNextLevel:We,calendarStatuses:ze,awardedAchievements:Ge}=Te(V);return new Date().getFullYear(),new Date().getMonth(),l?e.jsx(K,{children:e.jsxs("div",{className:"p-4 md:p-6 lg:p-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6 md:mb-8",id:"gamification-header",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold mb-1 flex items-center gap-2 md:gap-3",children:[e.jsx(be,{className:"w-7 h-7 md:w-9 md:h-9 lg:w-10 lg:h-10 text-primary animate-glow"}),"Gamifica√ß√£o"]}),e.jsx("p",{className:"text-sm md:text-base text-muted-foreground",children:"Configure n√≠veis e conquistas da sua equipe"})]}),e.jsxs(oe,{onClick:A,variant:"outline",className:"flex gap-2 bg-white/10 hover:bg-white/20 border-white/20 text-foreground px-6 self-start md:self-auto",children:[e.jsx(fe,{className:"w-4 h-4 text-yellow-500"}),"Como usar"]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",id:"gamification-levels",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4 md:mb-6",children:[e.jsxs("h2",{className:"text-lg md:text-xl lg:text-2xl font-bold flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5 md:w-6 md:h-6 text-primary"}),"N√≠veis"]}),e.jsxs(L,{id:"gamification-add-level",variant:"glass",className:"flex items-center gap-2 text-sm md:text-base",onClick:()=>h({id:"",name:"",minXP:0,color:"from-gray-500 to-gray-600"}),children:[e.jsx(W,{className:"w-4 h-4"}),"Adicionar N√≠vel"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 md:gap-4",children:p.map(s=>e.jsxs(I,{hover:!0,className:"p-4 md:p-5 lg:p-6 group relative flex flex-col",children:[e.jsx("div",{className:`w-full h-2 rounded-full bg-gradient-to-r ${s.color} mb-3 md:mb-4`}),e.jsxs("div",{className:"flex justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-full bg-gradient-to-br ${s.color} flex items-center justify-center shadow-lg overflow-hidden shrink-0`,children:s.icon?.startsWith("http")?e.jsx("img",{src:s.icon,alt:"",className:"w-full h-full object-cover"}):s.icon?e.jsx("span",{className:"text-2xl leading-none",children:s.icon}):e.jsx("span",{className:"text-xl font-bold text-white",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base md:text-lg font-bold mb-0.5",children:s.name}),e.jsxs("p",{className:"text-xs md:text-sm text-muted-foreground",children:[s.minXP," XP necess√°rio"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",title:"Editar",onClick:c=>{c.stopPropagation(),h({...s})},children:e.jsx(G,{className:"w-4 h-4 text-muted-foreground hover:text-foreground"})}),e.jsx("button",{className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",title:"Remover",onClick:c=>{c.stopPropagation(),confirm("Confirmar remo√ß√£o do n√≠vel?")&&_(s.id)},children:e.jsx(U,{className:"w-4 h-4 text-muted-foreground hover:text-destructive"})})]})]})]},s.id))})]}),e.jsxs("div",{className:"mb-8",id:"gamification-classes",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl lg:text-2xl font-bold",children:"Classes de Pontua√ß√£o"}),e.jsxs(L,{id:"gamification-add-class",variant:"glass",className:"flex items-center gap-2 text-sm md:text-base",onClick:()=>$(!0),children:[e.jsx(W,{className:"w-4 h-4"}),"Adicionar Classe"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:j.map(s=>e.jsxs(I,{hover:!0,className:"p-4 flex flex-col justify-between",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("div",{className:"flex items-start gap-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg",children:s.label}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.key})]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>y(s),className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",title:"Editar",children:e.jsx(G,{className:"w-4 h-4 text-muted-foreground hover:text-foreground"})}),e.jsx("button",{onClick:()=>{confirm("Confirmar remo√ß√£o da classe?")&&E(s.key)},className:"p-1.5 rounded-lg hover:bg-white/10 transition-colors",title:"Remover",children:e.jsx(U,{className:"w-4 h-4 text-destructive"})})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[e.jsx("div",{className:"text-sm",children:"Pontos:"}),e.jsx("span",{className:"font-mono text-neon-cyan",children:s.points}),e.jsx("div",{className:"text-sm",children:"Cor:"}),e.jsx("div",{className:"w-6 h-6 rounded-lg border border-white/20",style:{background:s.bg||"#000000"}})]})]},s.key))})]}),e.jsxs("div",{className:"mb-8",id:"gamification-achievements",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(De,{className:"w-6 h-6 text-neon-violet"}),"Conquistas"]}),e.jsxs(L,{id:"gamification-add-achievement",variant:"glass",className:"flex items-center gap-2",onClick:()=>t({id:"",title:"",description:"",xp:0,classKeys:[],streakDays:0,icon:"üèÜ",scope:"individual",countThreshold:0,timeWindow:"month",ignoreDays:[]}),children:[e.jsx(W,{className:"w-4 h-4"}),"Nova Conquista"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(s=>e.jsx(I,{className:"p-4 relative group",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-neon-violet/20 to-neon-pink/20 flex items-center justify-center text-2xl border border-border",children:s.icon||"üèÜ"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-lg truncate pr-8",children:s.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 min-h-[40px]",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsxs("span",{className:"text-xs font-bold px-2 py-1 rounded-md bg-neon-cyan/10 text-neon-cyan border border-neon-cyan/20",children:["+",s.xp," XP"]}),s.streakDays?e.jsxs("span",{className:"text-xs px-2 py-1 rounded-md bg-muted/20 border border-border flex items-center gap-1",children:["üî• ",s.streakDays," dias"]}):null,s.timeWindow?e.jsxs("span",{className:"text-xs px-2 py-1 rounded-md bg-muted/20 border border-border capitalize",children:["üìÖ ",s.timeWindow==="month"?"Mensal":s.timeWindow==="week"?"Semanal":"Total"]}):null]})]}),e.jsxs("div",{className:"absolute top-4 right-4 flex flex-col gap-2 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>t(s),className:"p-1.5 rounded-lg bg-background/80 hover:bg-muted transition-colors",title:"Editar",children:e.jsx(G,{className:"w-4 h-4 text-foreground"})}),e.jsx("button",{onClick:()=>{confirm("Confirmar remo√ß√£o da conquista?")&&f(s.id)},className:"p-1.5 rounded-lg bg-background/80 hover:bg-red-500/20 transition-colors",title:"Remover",children:e.jsx(U,{className:"w-4 h-4 text-red-500"})})]})]})},s.id))}),e.jsx(M,{open:!!a,onOpenChange:s=>!s&&t(null),children:e.jsxs(O,{className:"w-[95vw] sm:w-full max-w-2xl max-h-[90vh] overflow-y-auto bg-popover/80 backdrop-blur-xl border-border text-popover-foreground p-4 md:p-6 rounded-xl",children:[e.jsx(J,{children:e.jsx(R,{children:a?.id?"Editar Conquista":"Nova Conquista"})}),a&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"flex gap-4 mb-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-2 block",children:"√çcone"}),e.jsx(le,{value:a.icon||"üèÜ",onChange:s=>t({...a,icon:s})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"T√≠tulo"}),e.jsx("input",{value:a.title,onChange:s=>t({...a,title:s.target.value}),className:"bg-background/50 backdrop-blur-sm px-3 py-2 rounded-xl border border-input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"XP"}),e.jsx("input",{type:"number",value:isNaN(a.xp)?"":a.xp,onChange:s=>t({...a,xp:s.target.value===""?NaN:Number(s.target.value)}),className:"bg-background/50 backdrop-blur-sm px-3 py-2 rounded-xl border border-input w-full"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Descri√ß√£o"}),e.jsx("textarea",{value:a.description,onChange:s=>t({...a,description:s.target.value}),className:"bg-background/50 backdrop-blur-sm px-3 py-2 rounded-xl border border-input w-full min-h-[80px]"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Dias Seguidos"}),e.jsx("input",{type:"number",value:a.streakDays===void 0||isNaN(a.streakDays)?"":a.streakDays,onChange:s=>t({...a,streakDays:s.target.value===""?NaN:Number(s.target.value)}),className:"bg-background/50 backdrop-blur-sm px-3 py-2 rounded-xl border border-input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Resetar a Conquista em:"}),e.jsxs(se,{value:a.timeWindow||"month",onValueChange:s=>t({...a,timeWindow:s}),children:[e.jsx(ae,{children:e.jsx(re,{})}),e.jsxs(te,{children:[e.jsx(v,{value:"month",children:"Mensalmente"}),e.jsx(v,{value:"week",children:"Semanalmente"}),e.jsx(v,{value:"total",children:"N√£o Resetar"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm mb-2 text-muted-foreground",children:"Dias Inv√°lidos (n√£o quebram sequ√™ncia)"}),e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Dias que n√£o interrompem a contagem da sequ√™ncia. Exemplo: Se 'S√°bado' e 'Domingo' forem marcados, uma postagem na Sexta e outra na Segunda ser√£o consideradas consecutivas."}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{day:0,label:"Domingo"},{day:1,label:"Segunda"},{day:2,label:"Ter√ßa"},{day:3,label:"Quarta"},{day:4,label:"Quinta"},{day:5,label:"Sexta"},{day:6,label:"S√°bado"}].map(({day:s,label:c})=>{const C=(a.ignoreDays||[]).includes(s);return e.jsxs("button",{type:"button",onClick:()=>{const F=a.ignoreDays||[],z=C?F.filter(me=>me!==s):[...F,s];t({...a,ignoreDays:z})},className:`px-3 py-1 rounded-xl border text-sm flex items-center gap-2 transition-colors ${C?"bg-accent/20 border-accent text-accent-foreground":"glass-card hover:bg-white/5"}`,children:[c,C?e.jsx(B,{className:"w-3 h-3"}):null]},s)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm mb-2 text-muted-foreground",children:"Classes v√°lidas"}),e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Selecione para quais classes essa conquista √© v√°lida."}),e.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(s=>{const c=(a.classKeys||[]).includes(s.key);return e.jsxs("button",{type:"button",onClick:()=>{const C=a.classKeys||[],F=c?C.filter(z=>z!==s.key):[...C,s.key];t({...a,classKeys:F})},className:`px-3 py-1 rounded-xl border text-sm flex items-center gap-2 transition-colors ${c?"bg-primary/20 border-primary text-primary-foreground":"glass-card hover:bg-white/5"}`,children:[e.jsx("span",{className:`w-3 h-3 rounded-full ${s.bgClass||""}`,style:{background:s.bgClass?void 0:s.bg}}),s.label,c?e.jsx(B,{className:"w-3 h-3"}):null]},s.key)})})]})]}),e.jsxs(ee,{children:[e.jsx(L,{variant:"glass",onClick:()=>t(null),children:"Cancelar"}),e.jsx(L,{variant:"glass",onClick:()=>{if(a){if(a.id)d(a.id,a),Q.success("Conquista atualizada");else{const s=a.title.toLowerCase().trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9\s_]/g,"").replace(/\s+/g,"_").replace(/_+/g,"_").slice(0,40),c=Math.random().toString(36).slice(2,6),C=`${s||"conquista"}_${c}`;q({...a,id:C}),Q.success("Conquista criada")}t(null)}},children:a?.id?"Salvar Altera√ß√µes":"Criar Conquista"})]})]})}),e.jsx(M,{open:!!i,onOpenChange:s=>!s&&h(null),children:e.jsxs(O,{className:"max-w-md bg-popover/80 backdrop-blur-xl border-border text-popover-foreground",children:[e.jsx(J,{children:e.jsx(R,{children:i?.id?"Editar N√≠vel":"Novo N√≠vel"})}),i&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Nome do N√≠vel"}),e.jsx("input",{value:i.name,onChange:s=>h({...i,name:s.target.value}),placeholder:"Ex: Iniciante",className:"bg-background/50 backdrop-blur-sm px-3 py-2 rounded-xl border border-input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"XP Necess√°rio"}),e.jsx("input",{type:"number",value:isNaN(i.minXP)?"":i.minXP,onChange:s=>h({...i,minXP:s.target.value===""?NaN:Number(s.target.value)}),placeholder:"Ex: 0",className:"bg-background/50 backdrop-blur-sm px-3 py-2 rounded-xl border border-input w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"√çcone"}),e.jsx(le,{value:i.icon||"",onChange:s=>h({...i,icon:s})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground mb-1 block",children:"Cor (Gradiente)"}),e.jsxs(se,{value:i.color,onValueChange:s=>h({...i,color:s}),children:[e.jsx(ae,{children:e.jsx(re,{})}),e.jsxs(te,{children:[e.jsx(v,{value:"from-gray-500 to-gray-600",children:"Cinza (Iniciante)"}),e.jsx(v,{value:"from-green-500 to-green-600",children:"Verde (Novato)"}),e.jsx(v,{value:"from-blue-500 to-blue-600",children:"Azul (Intermedi√°rio)"}),e.jsx(v,{value:"from-purple-500 to-purple-600",children:"Roxo (Avan√ßado)"}),e.jsx(v,{value:"from-orange-500 to-orange-600",children:"Laranja (Expert)"}),e.jsx(v,{value:"from-red-500 to-red-600",children:"Vermelho (Mestre)"}),e.jsx(v,{value:"from-yellow-400 to-yellow-500",children:"Dourado (Lenda)"})]})]})]})]}),e.jsxs(ee,{children:[e.jsx(L,{variant:"glass",onClick:()=>h(null),children:"Cancelar"}),e.jsx(L,{variant:"glass",onClick:()=>{if(i){if(i.id)k(i.id,i);else{const s=i.name.toLowerCase().trim().replace(/\s+/g,"_");if(!s||!i.name)return;S({...i,id:s})}h(null)}},children:"Salvar"})]})]})}),e.jsx(M,{open:ne,onOpenChange:$,children:e.jsxs(O,{className:"w-[95vw] sm:w-full max-w-lg max-h-[90vh] overflow-y-auto bg-background/95 backdrop-blur-2xl border-none shadow-2xl rounded-3xl p-0",children:[e.jsx(R,{className:"sr-only",children:"Nova Classe"}),e.jsxs("div",{className:"relative h-32 bg-gradient-to-br from-primary/20 via-secondary/20 to-accent/20",children:[e.jsx("div",{className:"absolute inset-0 bg-white/40 dark:bg-black/40 backdrop-blur-[2px]"}),e.jsxs("div",{className:"absolute bottom-6 left-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Nova Classe"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Adicione uma nova classe de pontua√ß√£o"})]})]}),e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Nome da Classe"}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{value:r.label,onChange:s=>w({...r,label:s.target.value}),className:"w-full bg-gray-50 dark:bg-white/5 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 font-medium",placeholder:"Ex: Postou Vendas"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground/50 group-focus-within:text-primary transition-colors",children:e.jsx(H,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Descri√ß√£o"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{value:r.description,onChange:s=>w({...r,description:s.target.value}),className:"w-full bg-gray-50 dark:bg-white/5 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 font-medium",placeholder:"Ex: Ganha pontos ao realizar vendas..."})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Pontua√ß√£o"}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"number",value:isNaN(r.points)?"":r.points,onChange:s=>w({...r,points:s.target.value===""?NaN:Number(s.target.value)}),className:"w-full bg-gray-50 dark:bg-white/5 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 font-mono font-bold text-lg"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground/50",children:e.jsx("span",{className:"text-xs font-bold",children:"PTS"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Cor do Badge"}),e.jsxs("div",{className:"flex items-center gap-3 p-1.5 bg-muted/50 dark:bg-muted/20 rounded-2xl border-2 border-transparent hover:border-primary/20 transition-all duration-300",children:[e.jsx("div",{className:"relative w-10 h-10 rounded-xl overflow-hidden shrink-0 shadow-sm",children:e.jsx("input",{type:"color",value:r.bg,onChange:s=>w({...r,bg:s.target.value}),className:"absolute inset-[-50%] w-[200%] h-[200%] cursor-pointer border-none p-0 m-0"})}),e.jsx("span",{className:"font-mono text-xs font-medium opacity-70 uppercase truncate",children:r.bg})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Tipo de Dia"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"positive",label:"Positivo",color:"bg-green-500/10 text-green-500 border-green-500/20"},{value:"negative",label:"Negativo",color:"bg-red-500/10 text-red-500 border-red-500/20"},{value:"neutral",label:"Neutro",color:"bg-gray-500/10 text-gray-500 border-gray-500/20"}].map(s=>e.jsx("button",{onClick:()=>w({...r,type:s.value}),className:`px-3 py-2 rounded-xl text-sm font-medium border-2 transition-all duration-300 ${r.type===s.value?s.color.replace("border-","border-")+" ring-2 ring-offset-1 ring-offset-background":"bg-gray-50 dark:bg-white/5 border-transparent text-muted-foreground hover:bg-gray-100 dark:hover:bg-white/10"}`,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100 dark:border-white/5",children:[e.jsx("button",{onClick:()=>$(!1),className:"flex-1 px-6 py-3 rounded-xl font-medium text-muted-foreground hover:bg-gray-100 dark:hover:bg-white/5 transition-colors duration-300",children:"Cancelar"}),e.jsxs("button",{onClick:()=>{const s=r.label.toLowerCase().trim().replace(/\s+/g,"_");r.label&&(b({key:s,label:r.label,description:r.description,points:r.points,bg:r.bg}),w({label:"",description:"",points:0,bg:"#ffffff",type:"neutral"}),$(!1))},className:"flex-[2] px-6 py-3 rounded-xl font-bold bg-gradient-to-r from-primary to-secondary text-white shadow-lg shadow-primary/25 hover:shadow-primary/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),"Adicionar Classe"]})]})]})]})}),e.jsx(M,{open:!!o,onOpenChange:s=>!s&&y(null),children:e.jsxs(O,{className:"w-[95vw] sm:w-full max-w-lg max-h-[90vh] overflow-y-auto bg-background/95 backdrop-blur-2xl border-none shadow-2xl rounded-3xl p-0",children:[e.jsx(R,{className:"sr-only",children:"Editar Classe"}),e.jsxs("div",{className:"relative h-32 bg-gradient-to-br from-primary/20 via-secondary/20 to-accent/20",children:[e.jsx("div",{className:"absolute inset-0 bg-white/40 dark:bg-black/40 backdrop-blur-[2px]"}),e.jsxs("div",{className:"absolute bottom-6 left-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Editar Classe"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Personalize os atributos da classe"})]})]}),o&&e.jsxs("div",{className:"p-8 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Nome da Classe"}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{value:o.label,onChange:s=>y({...o,label:s.target.value}),className:"w-full bg-gray-50 dark:bg-white/5 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 font-medium",placeholder:"Ex: Postou Vendas"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground/50 group-focus-within:text-primary transition-colors",children:e.jsx(H,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Descri√ß√£o"}),e.jsx("div",{className:"relative group",children:e.jsx("input",{value:o.description||"",onChange:s=>y({...o,description:s.target.value}),className:"w-full bg-gray-50 dark:bg-white/5 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 font-medium",placeholder:"Ex: Ganha pontos ao realizar vendas..."})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Pontua√ß√£o"}),e.jsxs("div",{className:"relative group",children:[e.jsx("input",{type:"number",value:isNaN(o.points)?"":o.points,onChange:s=>y({...o,points:s.target.value===""?NaN:Number(s.target.value)}),className:"w-full bg-gray-50 dark:bg-white/5 border-2 border-transparent focus:border-primary/50 rounded-2xl px-4 py-3 outline-none transition-all duration-300 hover:bg-gray-100 dark:hover:bg-white/10 font-mono font-bold text-lg"}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-muted-foreground/50",children:e.jsx("span",{className:"text-xs font-bold",children:"PTS"})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Cor do Badge"}),e.jsxs("div",{className:"flex items-center gap-3 p-1.5 bg-muted/50 dark:bg-muted/20 rounded-2xl border-2 border-transparent hover:border-primary/20 transition-all duration-300",children:[e.jsx("div",{className:"relative w-10 h-10 rounded-xl overflow-hidden shrink-0 shadow-sm",children:e.jsx("input",{type:"color",value:o.bg||"#000000",onChange:s=>y({...o,bg:s.target.value,bgClass:void 0}),className:"absolute inset-[-50%] w-[200%] h-[200%] cursor-pointer border-none p-0 m-0"})}),e.jsx("span",{className:"font-mono text-xs font-medium opacity-70 uppercase truncate",children:o.bg||"#000000"})]})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-muted-foreground",children:"Tipo de Dia"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{value:"positive",label:"Positivo",color:"bg-green-500/10 text-green-500 border-green-500/20"},{value:"negative",label:"Negativo",color:"bg-red-500/10 text-red-500 border-red-500/20"},{value:"neutral",label:"Neutro",color:"bg-gray-500/10 text-gray-500 border-gray-500/20"}].map(s=>e.jsx("button",{onClick:()=>y({...o,type:s.value}),className:`px-3 py-2 rounded-xl text-sm font-medium border-2 transition-all duration-300 ${(o.type||"neutral")===s.value?s.color.replace("border-","border-")+" ring-2 ring-offset-1 ring-offset-background":"bg-gray-50 dark:bg-white/5 border-transparent text-muted-foreground hover:bg-gray-100 dark:hover:bg-white/10"}`,children:s.label},s.value))})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-100 dark:border-white/5",children:[e.jsx("button",{onClick:()=>y(null),className:"flex-1 px-6 py-3 rounded-xl font-medium text-muted-foreground hover:bg-gray-100 dark:hover:bg-white/5 transition-colors duration-300",children:"Cancelar"}),e.jsxs("button",{onClick:()=>{o&&(N(o.key,o),y(null))},className:"flex-[2] px-6 py-3 rounded-xl font-bold bg-gradient-to-r from-primary to-secondary text-white shadow-lg shadow-primary/25 hover:shadow-primary/40 hover:scale-[1.02] active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-2",children:[e.jsx(B,{className:"w-4 h-4"}),"Salvar Altera√ß√µes"]})]})]})]})})]})]})}):e.jsx(K,{children:e.jsx("div",{className:"p-4 md:p-6 lg:p-8",children:e.jsx(I,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Le,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("div",{className:"font-semibold",children:"Acesso restrito"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Fa√ßa login para continuar."})]})]})})})})}export{bs as default};
