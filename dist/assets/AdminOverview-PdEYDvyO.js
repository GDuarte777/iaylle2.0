import{c as u,j as o,a2 as c,o as e,I as y,H as R}from"./index-D9dO6jDR.js";import{G as g}from"./GlassCard-3LL1uNH4.js";import{T as i}from"./trending-up-C1Cz1gDO.js";const _=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],s=u("activity",_);const A=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],n=u("dollar-sign",A);function T(){const[p,d]=o.useState([{label:"Usuários Totais",value:"–",change:"",icon:c,color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-100 dark:bg-blue-400/10"},{label:"Assinaturas Ativas",value:"0",change:"",icon:s,color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-100 dark:bg-purple-400/10"},{label:"Receita (últimos 7 dias)",value:"R$ 0,00",change:"",icon:n,color:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-400/10"},{label:"Receita Mensal",value:"R$ 0,00",change:"",icon:n,color:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-400/10"},{label:"Novos Assinantes (mês)",value:"0",change:"",icon:i,color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-100 dark:bg-purple-400/10"},{label:"Taxa de Retenção",value:"0%",change:"",icon:s,color:"text-orange-600 dark:text-orange-400",bg:"bg-orange-100 dark:bg-orange-400/10"}]),[x,m]=o.useState(!0);return o.useEffect(()=>{(async()=>{try{const a=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}),{data:l,error:b}=await y.rpc("get_admin_overview_metrics");if(b)throw b;const t=l??{},h=Number(t.total_users??0),v=Number(t.active_subscriptions??0),k=Number(t.revenue_last7_cents??0),N=Number(t.revenue_month_cents??0),f=Number(t.new_subscriptions_month??0),j=Number(t.retention_percent??0);d([{label:"Usuários Totais",value:String(h),change:"",icon:c,color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-100 dark:bg-blue-400/10"},{label:"Assinaturas Ativas",value:String(v),change:"",icon:s,color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-100 dark:bg-purple-400/10"},{label:"Receita (últimos 7 dias)",value:a.format((k||0)/100),change:"",icon:n,color:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-400/10"},{label:"Receita Mensal",value:a.format((N||0)/100),change:"",icon:n,color:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-400/10"},{label:"Novos Assinantes (mês)",value:String(f),change:"",icon:i,color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-100 dark:bg-purple-400/10"},{label:"Taxa de Retenção",value:`${j}%`,change:"",icon:s,color:"text-orange-600 dark:text-orange-400",bg:"bg-orange-100 dark:bg-orange-400/10"}])}catch(a){const l=a instanceof Error?a.message:String(a);R.error("Erro ao carregar métricas",{description:l}),d([{label:"Usuários Totais",value:"N/D",change:"",icon:c,color:"text-blue-600 dark:text-blue-400",bg:"bg-blue-100 dark:bg-blue-400/10"},{label:"Assinaturas Ativas",value:"N/D",change:"",icon:s,color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-100 dark:bg-purple-400/10"},{label:"Receita (últimos 7 dias)",value:"N/D",change:"",icon:n,color:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-400/10"},{label:"Receita Mensal",value:"N/D",change:"",icon:n,color:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-400/10"},{label:"Novos Assinantes (mês)",value:"N/D",change:"",icon:i,color:"text-purple-600 dark:text-purple-400",bg:"bg-purple-100 dark:bg-purple-400/10"},{label:"Taxa de Retenção",value:"N/D",change:"",icon:s,color:"text-orange-600 dark:text-orange-400",bg:"bg-orange-100 dark:bg-orange-400/10"}])}finally{m(!1)}})()},[]),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Visão Geral"}),e.jsx("p",{className:"text-muted-foreground",children:"Bem-vindo de volta, Administrador."})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:p.map((r,a)=>e.jsxs(g,{className:"p-6 hover:scale-[1.02] transition-transform duration-300",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${r.bg}`,children:e.jsx(r.icon,{className:`w-6 h-6 ${r.color}`})}),!x&&r.change&&e.jsx("span",{className:"text-xs font-bold text-green-400 bg-green-400/10 px-2 py-1 rounded-lg",children:r.change})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold mb-1",children:r.value}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.label})]})]},a))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(g,{className:"p-6 h-[300px] flex items-center justify-center border-dashed border-2 border-border bg-card/50",children:e.jsx("p",{className:"text-muted-foreground",children:"Gráfico de Receita (Em breve)"})}),e.jsx(g,{className:"p-6 h-[300px] flex items-center justify-center border-dashed border-2 border-border bg-card/50",children:e.jsx("p",{className:"text-muted-foreground",children:"Gráfico de Usuários (Em breve)"})})]})]})}export{T as default};
